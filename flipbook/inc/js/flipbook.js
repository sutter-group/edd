try{window.initFlipbook=function(e){var t=$("#pageflip");t.pageflipInit(e),window.isPrintCss=!1},function(){var e=function(e){var t={};$.extend(t,this.config,e),this.config=t,"string"==typeof this.config.el?($(document).on("mouseenter",this.config.el,this,this.events.show),$(document).on("mouseleave",this.config.el,this,this.events.hide)):this.config.el instanceof $&&(this.config.el.on("mouseenter",null,this,this.events.show),this.config.el.on("mouseleave",null,this,this.events.hide))};e.prototype.config={orientation:"top",background:"blue",color:"white",speed:0,margin:0,fixedY:null,text:!1},e.prototype.events={show:function(e){var o=$(this).data("tooltip")?$(this).data("tooltip"):e.data.config.text,i=$(this).data("tooltip-hidden")===!0;if(o&&!i){var r=e.data.config,a=t(o,r);$("body").after(a);var s=$(this)[0].getBoundingClientRect(),c=$(a).height(),u=parseInt($(a).width()/2,10)-parseInt(s.width/2,10),l={top:function(){var e=s.left-u,t=r.fixedY?r.fixedY()-r.margin:s.top-c-r.margin;$(a).css("transform",n(e,t))},bottom:function(){var e=s.left-u,t=r.fixedY?r.fixedY()+s.height+r.margin:s.top+s.height+r.margin;$(a).css("transform",n(e,t))}};l[r.orientation](),$(a).fadeIn(r.speed)}},hide:function(e){$(".tooltip-container").remove()}};var t=function(e,t){var n=$("<div></div>",{"class":"tooltip-container"}),o=$("<div></div>",{"class":"tooltip"}),i=$("<div></div>",{"class":"tooltip-text"}),r=$("<div></div>",{"class":"tooltip-triangle-"+t.orientation});return r.css("border-"+t.orientation+"-color",t.background),i.css("background-color",t.background),i.css("color",t.color),n.append(o.append(i.html(e)).append(r))},n=function(e,t){return"translate("+e+"px, "+t+"px)"};window.FlipbookTooltips=e}(),window.FlipbookCursorManager=function(e,t){var n=(e.cursorColor,e.incDirPath),o={zoomin:n+"inc/img/controlbar/zoomin.cur",zoomout:n+"inc/img/controlbar/zoomout.cur"};this.setCursor=function(e,t){e instanceof jQuery&&e.length>0&&e.each(function(){var e=$(this);switch(t){case"zoomin":case"zoomout":e.data("cursor")!==t&&(e.data("cursor",t),e.css("cursor","url('"+o[t]+"'), auto"));break;default:"auto"!==e.data("cursor")&&(e.css("cursor","auto"),e.data("cursor","auto"))}})};var i=function(){var e=function(e){$("<div></div>").css({position:"absolute",width:"0px",height:"1px",cursor:"url('"+e+"'), auto"}).appendTo($("body"))};$.each(o,function(t,n){e(n)})};i()},function(){window.FlipbookUrl=function(e,t){var n,o=e.singlePageMode;this.getPageNumberFromUrl=function(){if("undefined"===$.type(n)){var e,o=window.location.search;if("string"===$.type(o)&&o.length>0){var r=/page=([^&]*)/g,a=r.exec(o);if($.isArray(a)&&a.length>1){var s=a[1],c=parseInt(s,10);$.isNumeric(c)&&(e=i(c))}}"undefined"===$.type(e)&&(e=t.getFirstPageNumber()),n=e}return n},this.updateUrl=function(e){var t=e.split("-"),o=t[0],i=window.location.protocol+"//"+window.location.host+window.location.pathname,r=parseInt(o,10);window.history&&"function"===$.type(window.history.pushState)&&$.isNumeric(r)&&("http:"!==location.protocol&&"https:"!==location.protocol||(n!=r?(window.history.pushState({pagenum:r},"",i+"?page="+r),n=r):window.history.replaceState({pagenum:r},"",i+"?page="+r)))};var i=function(e){var n=t.getFirstPageNumber(),i=t.getLastPageNumber();return n>e?e=n:e>i&&(e=i),!o&&e>1&&(e-=e%2),e},r=function(){$(window).on("popstate",function(e,o){if(window.history.state&&window.history.state.pagenum){var r=i(window.history.state.pagenum);r&&(n=r,t.gotoPageNumber(r,!0))}})};r()}}(),function(){var e=function(e){var t={};$.extend(t,this.config,e),this.config=t,$(document).on("mouseenter",this.config.el,this,this.events.show),$(document).on("mouseleave",this.config.el,this,this.events.hide)};e.prototype.config={background:"blue"},e.prototype.blink=function(){var e=this,t=$(this.config.el);setTimeout(function(){t.css("background",e.config.background),t.fadeTo(0,.5),setTimeout(function(){t.css("background","transparent")},300)},100)},e.prototype.events={show:function(e){$(this).css("opacity",.5),$(this).css("background",e.data.config.background)},hide:function(){$(this).css("background","transparent")}},window.FlipbookLinksFading=e}(),!function(e,t,n,o){"use strict";function i(e,t,n){return setTimeout(u(e,n),t)}function r(e,t,n){return Array.isArray(e)?(a(e,n[t],n),!0):!1}function a(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==o)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function s(t,n,o){var i="DEPRECATED METHOD: "+n+"\n"+o+" AT \n";return function(){var n=new Error("get-stack-trace"),o=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=e.console&&(e.console.warn||e.console.log);return r&&r.call(e.console,i,o),t.apply(this,arguments)}}function c(e,t,n){var o,i=t.prototype;o=e.prototype=Object.create(i),o.constructor=e,o._super=i,n&&de(o,n)}function u(e,t){return function(){return e.apply(t,arguments)}}function l(e,t){return typeof e==he?e.apply(t?t[0]||o:o,t):e}function d(e,t){return e===o?t:e}function p(e,t,n){a(v(t),function(t){e.addEventListener(t,n,!1)})}function f(e,t,n){a(v(t),function(t){e.removeEventListener(t,n,!1)})}function h(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function g(e,t){return e.indexOf(t)>-1}function v(e){return e.trim().split(/\s+/g)}function m(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var o=0;o<e.length;){if(n&&e[o][n]==t||!n&&e[o]===t)return o;o++}return-1}function b(e){return Array.prototype.slice.call(e,0)}function _(e,t,n){for(var o=[],i=[],r=0;r<e.length;){var a=t?e[r][t]:e[r];m(i,a)<0&&o.push(e[r]),i[r]=a,r++}return n&&(o=t?o.sort(function(e,n){return e[t]>n[t]}):o.sort()),o}function y(e,t){for(var n,i,r=t[0].toUpperCase()+t.slice(1),a=0;a<pe.length;){if(n=pe[a],i=n?n+r:t,i in e)return i;a++}return o}function w(){return ye++}function k(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}function T(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){l(e.options.enable,[e])&&n.handler(t)},this.init()}function x(e){var t,n=e.options.inputClass;return new(t=n?n:Te?R:xe?O:ke?W:H)(e,P)}function P(e,t,n){var o=n.pointers.length,i=n.changedPointers.length,r=t&Ie&&o-i===0,a=t&(Me|Ee)&&o-i===0;n.isFirst=!!r,n.isFinal=!!a,r&&(e.session={}),n.eventType=t,C(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function C(e,t){var n=e.session,o=t.pointers,i=o.length;n.firstInput||(n.firstInput=F(t)),i>1&&!n.firstMultiple?n.firstMultiple=F(t):1===i&&(n.firstMultiple=!1);var r=n.firstInput,a=n.firstMultiple,s=a?a.center:r.center,c=t.center=I(o);t.timeStamp=me(),t.deltaTime=t.timeStamp-r.timeStamp,t.angle=N(s,c),t.distance=E(s,c),S(n,t),t.offsetDirection=M(t.deltaX,t.deltaY);var u=$(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=u.x,t.overallVelocityY=u.y,t.overallVelocity=ve(u.x)>ve(u.y)?u.x:u.y,t.scale=a?L(a.pointers,o):1,t.rotation=a?A(a.pointers,o):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,B(n,t);var l=e.element;h(t.srcEvent.target,l)&&(l=t.srcEvent.target),t.target=l}function S(e,t){var n=t.center,o=e.offsetDelta||{},i=e.prevDelta||{},r=e.prevInput||{};t.eventType!==Ie&&r.eventType!==Me||(i=e.prevDelta={x:r.deltaX||0,y:r.deltaY||0},o=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=i.x+(n.x-o.x),t.deltaY=i.y+(n.y-o.y)}function B(e,t){var n,i,r,a,s=e.lastInterval||t,c=t.timeStamp-s.timeStamp;if(t.eventType!=Ee&&(c>Fe||s.velocity===o)){var u=t.deltaX-s.deltaX,l=t.deltaY-s.deltaY,d=$(c,u,l);i=d.x,r=d.y,n=ve(d.x)>ve(d.y)?d.x:d.y,a=M(u,l),e.lastInterval=t}else n=s.velocity,i=s.velocityX,r=s.velocityY,a=s.direction;t.velocity=n,t.velocityX=i,t.velocityY=r,t.direction=a}function F(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:ge(e.pointers[n].clientX),clientY:ge(e.pointers[n].clientY)},n++;return{timeStamp:me(),pointers:t,center:I(t),deltaX:e.deltaX,deltaY:e.deltaY}}function I(e){var t=e.length;if(1===t)return{x:ge(e[0].clientX),y:ge(e[0].clientY)};for(var n=0,o=0,i=0;t>i;)n+=e[i].clientX,o+=e[i].clientY,i++;return{x:ge(n/t),y:ge(o/t)}}function $(e,t,n){return{x:t/e||0,y:n/e||0}}function M(e,t){return e===t?Ne:ve(e)>=ve(t)?0>e?Ae:Le:0>t?He:Re}function E(e,t,n){n||(n=qe);var o=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(o*o+i*i)}function N(e,t,n){n||(n=qe);var o=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,o)/Math.PI}function A(e,t){return N(t[1],t[0],We)+N(e[1],e[0],We)}function L(e,t){return E(t[0],t[1],We)/E(e[0],e[1],We)}function H(){this.evEl=Ye,this.evWin=Ue,this.pressed=!1,T.apply(this,arguments)}function R(){this.evEl=Ve,this.evWin=Ge,T.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function z(){this.evTarget=Je,this.evWin=Ke,this.started=!1,T.apply(this,arguments)}function D(e,t){var n=b(e.touches),o=b(e.changedTouches);return t&(Me|Ee)&&(n=_(n.concat(o),"identifier",!0)),[n,o]}function O(){this.evTarget=tt,this.targetIds={},T.apply(this,arguments)}function q(e,t){var n=b(e.touches),o=this.targetIds;if(t&(Ie|$e)&&1===n.length)return o[n[0].identifier]=!0,[n,n];var i,r,a=b(e.changedTouches),s=[],c=this.target;if(r=n.filter(function(e){return h(e.target,c)}),t===Ie)for(i=0;i<r.length;)o[r[i].identifier]=!0,i++;for(i=0;i<a.length;)o[a[i].identifier]&&s.push(a[i]),t&(Me|Ee)&&delete o[a[i].identifier],i++;return s.length?[_(r.concat(s),"identifier",!0),s]:void 0}function W(){T.apply(this,arguments);var e=u(this.handler,this);this.touch=new O(this.manager,e),this.mouse=new H(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function X(e,t){e&Ie?(this.primaryTouch=t.changedPointers[0].identifier,Y.call(this,t)):e&(Me|Ee)&&Y.call(this,t)}function Y(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var o=this.lastTouches,i=function(){var e=o.indexOf(n);e>-1&&o.splice(e,1)};setTimeout(i,nt)}}function U(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,o=0;o<this.lastTouches.length;o++){var i=this.lastTouches[o],r=Math.abs(t-i.x),a=Math.abs(n-i.y);if(ot>=r&&ot>=a)return!0}return!1}function j(e,t){this.manager=e,this.set(t)}function Z(e){if(g(e,ut))return ut;var t=g(e,lt),n=g(e,dt);return t&&n?ut:t||n?t?lt:dt:g(e,ct)?ct:st}function V(){if(!rt)return!1;var t={},n=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(o){t[o]=n?e.CSS.supports("touch-action",o):!0}),t}function G(e){this.options=de({},this.defaults,e||{}),this.id=w(),this.manager=null,this.options.enable=d(this.options.enable,!0),this.state=ft,this.simultaneous={},this.requireFail=[]}function Q(e){return e&bt?"cancel":e&vt?"end":e&gt?"move":e&ht?"start":""}function J(e){return e==Re?"down":e==He?"up":e==Ae?"left":e==Le?"right":""}function K(e,t){var n=t.manager;return n?n.get(e):e}function ee(){G.apply(this,arguments)}function te(){ee.apply(this,arguments),this.pX=null,this.pY=null}function ne(){ee.apply(this,arguments)}function oe(){G.apply(this,arguments),this._timer=null,this._input=null}function ie(){ee.apply(this,arguments)}function re(){ee.apply(this,arguments)}function ae(){G.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function se(e,t){return t=t||{},t.recognizers=d(t.recognizers,se.defaults.preset),new ce(e,t)}function ce(e,t){this.options=de({},se.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=x(this),this.touchAction=new j(this,this.options.touchAction),ue(this,!0),a(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function ue(e,t){var n=e.element;if(n.style){var o;a(e.options.cssProps,function(i,r){o=y(n.style,r),t?(e.oldCssProps[o]=n.style[o],n.style[o]=i):n.style[o]=e.oldCssProps[o]||""}),t||(e.oldCssProps={})}}function le(e,n){var o=t.createEvent("Event");o.initEvent(e,!0,!0),o.gesture=n,n.target.dispatchEvent(o)}var de,pe=["","webkit","Moz","MS","ms","o"],fe=t.createElement("div"),he="function",ge=Math.round,ve=Math.abs,me=Date.now;de="function"!=typeof Object.assign?function(e){if(e===o||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==o&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}:Object.assign;var be=s(function(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;)(!n||n&&e[i[r]]===o)&&(e[i[r]]=t[i[r]]),r++;return e},"extend","Use `assign`."),_e=s(function(e,t){return be(e,t,!0)},"merge","Use `assign`."),ye=1,we=/mobile|tablet|ip(ad|hone|od)|android/i,ke="ontouchstart"in e,Te=y(e,"PointerEvent")!==o,xe=ke&&we.test(navigator.userAgent),Pe="touch",Ce="pen",Se="mouse",Be="kinect",Fe=25,Ie=1,$e=2,Me=4,Ee=8,Ne=1,Ae=2,Le=4,He=8,Re=16,ze=Ae|Le,De=He|Re,Oe=ze|De,qe=["x","y"],We=["clientX","clientY"];T.prototype={handler:function(){},init:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(k(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(k(this.element),this.evWin,this.domHandler)}};var Xe={mousedown:Ie,mousemove:$e,mouseup:Me},Ye="mousedown",Ue="mousemove mouseup";c(H,T,{handler:function(e){var t=Xe[e.type];t&Ie&&0===e.button&&(this.pressed=!0),t&$e&&1!==e.which&&(t=Me),this.pressed&&(t&Me&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:Se,srcEvent:e}))}});var je={pointerdown:Ie,pointermove:$e,pointerup:Me,pointercancel:Ee,pointerout:Ee},Ze={2:Pe,3:Ce,4:Se,5:Be},Ve="pointerdown",Ge="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Ve="MSPointerDown",Ge="MSPointerMove MSPointerUp MSPointerCancel"),c(R,T,{handler:function(e){var t=this.store,n=!1,o=e.type.toLowerCase().replace("ms",""),i=je[o],r=Ze[e.pointerType]||e.pointerType,a=r==Pe,s=m(t,e.pointerId,"pointerId");i&Ie&&(0===e.button||a)?0>s&&(t.push(e),s=t.length-1):i&(Me|Ee)&&(n=!0),0>s||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:r,srcEvent:e}),n&&t.splice(s,1))}});var Qe={touchstart:Ie,touchmove:$e,touchend:Me,touchcancel:Ee},Je="touchstart",Ke="touchstart touchmove touchend touchcancel";c(z,T,{handler:function(e){var t=Qe[e.type];if(t===Ie&&(this.started=!0),this.started){var n=D.call(this,e,t);t&(Me|Ee)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Pe,srcEvent:e})}}});var et={touchstart:Ie,touchmove:$e,touchend:Me,touchcancel:Ee},tt="touchstart touchmove touchend touchcancel";c(O,T,{handler:function(e){var t=et[e.type],n=q.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Pe,srcEvent:e})}});var nt=2500,ot=25;c(W,T,{handler:function(e,t,n){var o=n.pointerType==Pe,i=n.pointerType==Se;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(o)X.call(this,t,n);else if(i&&U.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var it=y(fe.style,"touchAction"),rt=it!==o,at="compute",st="auto",ct="manipulation",ut="none",lt="pan-x",dt="pan-y",pt=V();j.prototype={set:function(e){e==at&&(e=this.compute()),rt&&this.manager.element.style&&pt[e]&&(this.manager.element.style[it]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return a(this.manager.recognizers,function(t){l(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),Z(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var o=this.actions,i=g(o,ut)&&!pt[ut],r=g(o,dt)&&!pt[dt],a=g(o,lt)&&!pt[lt];if(i){var s=1===e.pointers.length,c=e.distance<2,u=e.deltaTime<250;if(s&&c&&u)return}return a&&r?void 0:i||r&&n&ze||a&&n&De?this.preventSrc(t):void 0},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var ft=1,ht=2,gt=4,vt=8,mt=vt,bt=16,_t=32;G.prototype={defaults:{},set:function(e){return de(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(r(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=K(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return r(e,"dropRecognizeWith",this)?this:(e=K(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(r(e,"requireFailure",this))return this;var t=this.requireFail;return e=K(e,this),-1===m(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(r(e,"dropRequireFailure",this))return this;e=K(e,this);var t=m(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(t,e)}var n=this,o=this.state;vt>o&&t(n.options.event+Q(o)),t(n.options.event),e.additionalEvent&&t(e.additionalEvent),o>=vt&&t(n.options.event+Q(o))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=_t)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(_t|ft)))return!1;e++}return!0},recognize:function(e){var t=de({},e);return l(this.options.enable,[this,t])?(this.state&(mt|bt|_t)&&(this.state=ft),this.state=this.process(t),void(this.state&(ht|gt|vt|bt)&&this.tryEmit(t))):(this.reset(),void(this.state=_t))},process:function(e){},getTouchAction:function(){},reset:function(){}},c(ee,G,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,o=t&(ht|gt),i=this.attrTest(e);return o&&(n&Ee||!i)?t|bt:o||i?n&Me?t|vt:t&ht?t|gt:ht:_t}}),c(te,ee,{defaults:{event:"pan",threshold:10,pointers:1,direction:Oe},getTouchAction:function(){var e=this.options.direction,t=[];return e&ze&&t.push(dt),e&De&&t.push(lt),t},directionTest:function(e){var t=this.options,n=!0,o=e.distance,i=e.direction,r=e.deltaX,a=e.deltaY;return i&t.direction||(t.direction&ze?(i=0===r?Ne:0>r?Ae:Le,n=r!=this.pX,o=Math.abs(e.deltaX)):(i=0===a?Ne:0>a?He:Re,n=a!=this.pY,o=Math.abs(e.deltaY))),e.direction=i,n&&o>t.threshold&&i&t.direction},attrTest:function(e){return ee.prototype.attrTest.call(this,e)&&(this.state&ht||!(this.state&ht)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=J(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),c(ne,ee,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ut]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&ht)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),c(oe,G,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[st]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,o=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!o||!n||e.eventType&(Me|Ee)&&!r)this.reset();else if(e.eventType&Ie)this.reset(),this._timer=i(function(){this.state=mt,this.tryEmit()},t.time,this);else if(e.eventType&Me)return mt;return _t},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===mt&&(e&&e.eventType&Me?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=me(),this.manager.emit(this.options.event,this._input)))}}),c(ie,ee,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ut]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&ht)}}),c(re,ee,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:ze|De,pointers:1},getTouchAction:function(){return te.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(ze|De)?t=e.overallVelocity:n&ze?t=e.overallVelocityX:n&De&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&ve(t)>this.options.velocity&&e.eventType&Me},emit:function(e){var t=J(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),c(ae,G,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ct]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,o=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&Ie&&0===this.count)return this.failTimeout();if(o&&r&&n){if(e.eventType!=Me)return this.failTimeout();var a=this.pTime?e.timeStamp-this.pTime<t.interval:!0,s=!this.pCenter||E(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,s&&a?this.count+=1:this.count=1,this._input=e;var c=this.count%t.taps;if(0===c)return this.hasRequireFailures()?(this._timer=i(function(){this.state=mt,this.tryEmit()},t.interval,this),ht):mt}return _t},failTimeout:function(){return this._timer=i(function(){this.state=_t},this.options.interval,this),_t},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==mt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),se.VERSION="2.0.8",se.defaults={domEvents:!1,touchAction:at,enable:!0,inputTarget:null,inputClass:null,preset:[[ie,{enable:!1}],[ne,{enable:!1},["rotate"]],[re,{direction:ze}],[te,{direction:ze},["swipe"]],[ae],[ae,{event:"doubletap",taps:2},["tap"]],[oe]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var yt=1,wt=2;ce.prototype={set:function(e){return de(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?wt:yt},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,o=this.recognizers,i=t.curRecognizer;(!i||i&&i.state&mt)&&(i=t.curRecognizer=null);for(var r=0;r<o.length;)n=o[r],t.stopped===wt||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&n.state&(ht|gt|vt)&&(i=t.curRecognizer=n),r++}},get:function(e){if(e instanceof G)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(r(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(r(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=m(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==o&&t!==o){var n=this.handlers;return a(v(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==o){var n=this.handlers;return a(v(e),function(e){t?n[e]&&n[e].splice(m(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&le(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var o=0;o<n.length;)n[o](t),o++}},destroy:function(){this.element&&ue(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},de(se,{INPUT_START:Ie,INPUT_MOVE:$e,INPUT_END:Me,INPUT_CANCEL:Ee,STATE_POSSIBLE:ft,STATE_BEGAN:ht,STATE_CHANGED:gt,STATE_ENDED:vt,STATE_RECOGNIZED:mt,STATE_CANCELLED:bt,STATE_FAILED:_t,DIRECTION_NONE:Ne,DIRECTION_LEFT:Ae,DIRECTION_RIGHT:Le,DIRECTION_UP:He,DIRECTION_DOWN:Re,DIRECTION_HORIZONTAL:ze,DIRECTION_VERTICAL:De,DIRECTION_ALL:Oe,Manager:ce,Input:T,TouchAction:j,TouchInput:O,MouseInput:H,PointerEventInput:R,TouchMouseInput:W,SingleTouchInput:z,Recognizer:G,AttrRecognizer:ee,Tap:ae,Pan:te,Swipe:re,Pinch:ne,Rotate:ie,Press:oe,on:p,off:f,each:a,merge:_e,extend:be,assign:de,inherit:c,bindFn:u,prefixed:y});var kt="undefined"!=typeof e?e:"undefined"!=typeof self?self:{};kt.Hammer=se,"function"==typeof define&&define.amd?define(function(){return se}):"undefined"!=typeof module&&module.exports?module.exports=se:e[n]=se}(window,document,"Hammer"),window.makeObjectObservable=function(e){if("object"==typeof e){var t={};e.addEventHandler=function(e,n){$.isArray(t[e])||(t[e]=[]),t[e].push(n)},e._emitEvent=function(e,n){$.isArray(t[e])&&$.each(t[e],function(e,t){t(n)})}}},function(){var e=50,t=26,n=10,o=200;window.NavigationArrowsManager=function(i,r,a){var s,c,u,l,d,p,f,h=!0;this.init=function(){s=$("#Template-navigationButtons").html(),c=$(s),u=c.closest("#b-prev"),l=c.closest("#b-next"),d=c.closest("#b-first"),p=c.closest("#b-last"),v(),g(),$("#pf-stage").prepend(c)},this.setPosition=function(o){var r=i.getStageWidth(),a=i.getStageHeight(),s=i.getMargin(),c=i.getBookWidth(),h=i.getBookHeight(),g=i.getControlbarHeight(),v=r,b=a-2*s-g,_=(v-c*o)/2,y=(b-h*o)/2+s,w=o*h,k=o*c;f={prev:{left:_-e-n,top:y+w/2-e/2},first:{left:_-t-n-8,top:y+w-t},next:{left:_+k+n,top:y+w/2-e/2},last:{left:_+k+n+8,top:y+w-t}},m(u,f.prev),m(l,f.next),m(d,f.first),m(p,f.last)},this.shift=function(e,t){if("undefined"!==$.type(f)){var n,a=i.getPN(),s=i.getEndPN();"undefined"===$.type(s)&&(s=a);var c=i.getBookWidth(),g=i.getBookScale(),v=r.SinglePageMode;n=v?c/2:c/4;var b,_=i.getLastPageNumber(),y=Math.abs(e)===n&&!v,w=v&&(0===a||a===_-1);if(b=v?0:e*g,y||w){var k=!v&&e>0,T=v&&a===_-1;k||T?($.each([["next",l],["last",p]],function(e,t){h&&(a===_-1?t[1].hide():t[1].fadeOut(o))}),$.each([["prev",u],["first",d]],function(e,t){m(t[1],f[t[0]].left+b,f[t[0]].top),h&&0!==s&&t[1].fadeIn(o)})):($.each([["prev",u],["first",d]],function(e,t){h&&(0===a?t[1].hide():t[1].fadeOut(o))}),$.each([["next",l],["last",p]],function(e,t){m(t[1],f[t[0]].left+b,f[t[0]].top),h&&s!==_-1&&t[1].fadeIn(o)}))}else $.each([["prev",u],["first",d],["next",l],["last",p]],function(t,n){0!==s&&s!==_-1&&(m(n[1],f[n[0]].left+b,f[n[0]].top),h&&((0!==e||v)&&w||n[1].fadeIn(o)))}),h&&(v?0===a?(s!==_-1&&(l.css("display","block"),p.css("display","block")),u.css("display","none"),d.css("display","none")):a===_-1&&(0!==s&&(u.css("display","block"),d.css("display","block")),l.css("display","none"),p.css("display","none")):0!==e&&(0===a||2===a?(s!==_-1&&(l.css("display","block"),p.css("display","block")),u.css("display","none"),d.css("display","none")):(0!==s&&(u.css("display","block"),d.css("display","block")),l.css("display","none"),p.css("display","none"))))}},this.toggle=function(e){if(e){var t=i.getPN(),n=i.getLastPageNumber(),r=i.getEndPN();"undefined"===$.type(r)&&(r=t),0===t?(l.fadeIn(o),p.fadeIn(o)):t===n-1?(u.show(),d.show()):c.show(),h=!0}else c.hide(),h=!1};var g=function(){u.on("click",function(e){e.preventDefault(),i.gotoPrevPage(!0)}),l.on("click",function(e){e.preventDefault(),i.gotoNextPage(!0)}),d.on("click",function(e){e.preventDefault(),i.gotoFirstPage(!0),d.add(u).fadeOut(o)}),p.on("click",function(e){e.preventDefault(),i.gotoLastPage(!0),p.add(l).fadeOut(o)})},v=function(){if("string"===$.type(a.color)&&c.find("g").css("fill",a.color),"string"===$.type(a.hoverColor)){var e="mouseenter",t="mouseleave";if(i.getIsTouchDevice()){var n=i.getPfEvent();e=n.__onStart,t=n.__onEnd}c.each(function(){$(this).on(e,function(){$(this).find("g").css("fill",a.hoverColor)}),$(this).on(t,function(){$(this).find("g").css("fill",a.color)})})}},m=function(e,t,n){"undefined"!==$.type(t)&&"undefined"!==$.type(n)||(n=t.top,t=t.left),e.css({transform:"translate("+Math.round(t)+"px, "+Math.round(n)+"px)"})};this.init()},window.NavigationArrowsManager.getSize=function(){return n+e}}(),window.AudioPlayer=function(e){var t={},n=1;this.init=function(){e&&$.each(e,function(e,o){if("undefined"!=typeof o&&"string"==typeof o.src){var i=new Audio;i.src=o.src,i.preload="auto",i.loop=!1,"number"==typeof o.volume?i.volume=o.volume:i.volume=n,$(i).on("loadeddata",function(){t[e]=i})}})},this.playSound=function(e){"undefined"!=typeof t[e]&&(t[e].paused||(t[e].pause(),t[e].currentTime=0),t[e].play())},this.init()},window.VideoManager=function(e){var t=this;window.makeObjectObservable(this),this.init=function(){e.addEventHandler("onLoad",n),e.addEventHandler("onFlip",o)};var n=function(e){var n=$("#page"+e),o="click";$(n).find(".youtube-player").each(function(){var e=$(this),n=$("<div></div>");e.parent().css({width:$(this).data("width"),height:$(this).data("height"),top:$(this).data("top"),left:$(this).data("left")}),n.html(i(e.data("id"))),n.on(o,function(){var e=n.parent();r(e,e.data("id")),t._emitEvent("onVideoFrameClick")}),e.append(n)}),$(n).find(".vimeo-player").each(function(){var e=$(this);$p=$("<div></div>"),$.getJSON("http://www.vimeo.com/api/v2/video/"+e.data("id")+".json?callback=?",{format:"json"},function(e){$p.html('<img class="video-thumb" src="'+e[0].thumbnail_large+'"><div class="play-button"></div>')}),e.parent().css({width:$(this).data("width"),height:$(this).data("height"),top:$(this).data("top"),left:$(this).data("left")}),$p.on(o,function(e){var n=$(e.target).parent().parent();a(n,n.data("id")),t._emitEvent("onVideoFrameClick")}),e.append($p)})},o=function(){var e=$(".video-iframe");e.each(function(e){$(this).remove()})},i=function(e){return'<img class="video-thumb" style="background:red" src="//i.ytimg.com/vi/'+e+'/hqdefault.jpg"><div class="play-button"></div>'},r=function(e,t){var n=$("<iframe></iframe>");n.attr("src","//www.youtube.com/embed/"+t+"?autohide=2&border=0&wmode=opaque&enablejsapi=1&controls=1&showinfo=1&autoplay=1"),n.attr("frameborder","0"),n.attr("class","video-iframe"),n.attr("z-index","1"),n.attr("id",t),n.attr("allowfullscreen","1"),e.append(n)},a=function(e,t){var n=$("<iframe></iframe>");n.attr("src","//player.vimeo.com/video/"+t+"?api=1&player_id="+t+"&color=ffffff&title=0&byline=0&portrait=0&autoplay=1"),n.attr("frameborder","0"),n.attr("class","video-iframe"),n.attr("z-index","1"),n.attr("id",t),e.append(n)};this.init()},window.SearchManager=function(e,t,n){var o,i=100,r=e.getPageInfoList();this.init=function(){},this.search=function(e,t){"undefined"===$.type(o)&&a();var n=[];return $.each(o,function(o,r){var a=r.innerText,c=s(a,e),u=[];$.each(c,function(n,o){var s,c,l="",d=i-e.length;if(d>6){var p,f,h,g=Math.floor((d-6)/2),v=o,m=a.length-e.length-o,b=v>g,_=m>g;b&&_?(s=o-g,c=o-1+e.length+g,p=!0,f=!0):b&&!_?(c=a.length-1,h=g-m,s=v>h+g?o-g-h:0,p=!0,f=!1):_&&!b?(s=0,h=g-v,c=m>h+g?o+e.length-1+g+h:a.length-1,p=!1,f=!0):(s=0,c=a.length-1,p=!1,f=!1),0>s&&(s=0),c>a.length-1&&(c=a.length-1);var y=a.substring(s,c+1);l=y.replace(new RegExp("("+e+")","gi"),"<div class='SearchResult-highlight'>$1</div>"),p&&(l="..."+l),f&&(l+="...")}else l="...<div class='"+t+"'>"+e+"</div>...",s=0,c=a.length-1;var w=!1;$.each(u,function(t,n){var i=n.snippetPositionLeftIdx,r=n.snippetPositionRightIdx;o>=i&&o+e.length-1<=r&&(w=!0)}),w||u.push({pageInfoObject:r,snippet:l,snippetPositionLeftIdx:s,snippetPositionRightIdx:c})}),n=n.concat(u)}),n};var a=function(){if(o=[],"undefined"!==$.type(window.flipbookSettings.content)){var e=window.flipbookSettings.content;$.each(r,function(t,n){if("string"===$.type(n.__ThumbnailImageUrl)&&"undefined"!==$.type(n.__PageNumber)&&n.__PageNumber>0){var i=n.__PageNumber;if("undefined"!==$.type(e[i])){var r=$.trim(e[i].replace(/\s+/g," ")),a={pageNumber:i,innerText:r,thumbnail:n.__ThumbnailImageUrl};o.push(a)}}})}},s=function(e,t){var n=[];if("string"===$.type(e)&&e.length>0&&"string"===$.type(t)&&t.length>0)for(var o=e.toLowerCase(),i=t.toLowerCase(),r=o.indexOf(i);-1!==r&&n.length<1e3;)n.push(r),
r=o.indexOf(i,r+1);return n};this.init()},window.SearchScreenManager=function(e,t,n){var o,i,r,a,s,c,u,l,d,p,f=this,h=168,g=$("body"),v=!1,m=[],b=0;this.init=function(){r=$($("#Template-searchScreen").html()),s=r.find(".SearchScreen-closeButton"),i=$($("#Template-searchScreenRes").html()),c=r.find(".SearchScreen-inputField"),u=r.find(".SearchScreen-resultsOpaqueContent"),l=r.find(".SearchScreen-resultsBackground"),a=r.find(".SearchScreen-contentTransparent"),c.on("input",_);var e=new Hammer(s.find(".SearchScreen-closeButtonImg")[0]);e.on("tap",function(e){f.closeSearchScreen(),e.srcEvent.preventDefault()}),l.css("background-color",t.searchResultsBackground),a.css("background-color",t.searchScreenBackground),c.css({"background-color":t.searchInputBackground,color:t.searchInputText}),l.css({"background-color":t.searchResultsBackground}),u.css("color",t.searchResultsText),s.find("svg").css("color",t.color1),c.css("border","0"),u.css("color",t.searchResultsText),d=u.parent(),d.on("scroll",w)},this.openSearchScreen=function(){v||(g.append(r),"undefined"===$.type(o)&&(o=Math.ceil(u.height()/h)),u.html(""),c.val(""),b=0,c.focus(),v=!0)},this.closeSearchScreen=function(){v&&(r.detach(),v=!1)};var _=function(e){var t=$(e.target).val();u.html(""),b=0,t.length>2&&(m=n.search(t,"SearchScreenRes-highlight"),w())},y=function(e,n){n||e.css("border-bottom","1px solid "+t.searchResultsSeparator)},w=function(t){var n=d.scrollTop(),r=u.height(),a=(n+r)/d.prop("scrollHeight");if(a>.8&&b<m.length+1){var s=b;$.each(Array(o),function(t){var n=b+t;if(n<m.length){var o=m[n],r=i.clone(),a=r.find(".SearchScreenRes-thumbnail img");a.attr("src",o.pageInfoObject.thumbnail);var c=r.find(".SearchScreenRes-content");c.html(o.snippet);var l=n===m.length-1;if(y(r,l),u.append(r),"undefined"===$.type(p)){var d=r.find(".SearchScreenRes-container");p=d.innerWidth()-d.width()}r.css("padding-bottom",p+"px"),r.css("padding-top",p+"px");var h=new Hammer(r[0]);h.on("tap",function(){e.gotoPageNumber(o.pageInfoObject.pageNumber,!0),f.closeSearchScreen()}),s+=1}}),b=s}};f.init()},window.SearchTooltipManager=function(e,t,n,o){var i,r,a,s,c,u,l,d,p,f,h=this,g=[],v=0,m=30,b="click";window.makeObjectObservable(this),this.getMiniTooltip=function(){return i},this.getFullTooltip=function(){return r},this.toggleTooltipMini=function(e){o.toggleTooltip(i,e),e?(a.val(""),a.css("visibility","visible"),a.focus()):a.css("visibility","hidden")},this.toggleTooltipFull=function(e){o.toggleTooltip(r,e),e?s.css("visibility","visible"):s.css("visibility","hidden")};var _=function(){if(e.getIsTouchDevice()){var t=e.getPfEvent();b=b+" "+t.__onEnd}i=$(".ControlbarTooltip--searchMini"),r=$(".ControlbarTooltip--searchFull"),a=i.find(".SearchMini-input"),s=r.find(".SearchFull-input"),c=r.find(".SearchFull-noResults"),u=r.find(".SearchFull-results"),l=r.find(".SearchFull-closeButton"),d=r.find(".SearchFull-searchButton"),p=i.find(".SearchMini-searchButton"),f=$($("#Template-searchResult").html()),i.add(r).on("mousedown mouseup mousemove",function(e){e.stopPropagation()}),a.add(s).on("input",k),a.add(s).keypress(function(e){13===e.which&&k()}),p.add(d).on(b,function(e){k()}),l.on(b,function(){h._emitEvent("closeButtonClick")}),u.on("scroll",T),y()},y=function(){a.add(s).css({"background-color":t.searchInputBackground,color:t.searchInputText}),a.add(s).css("border","0"),u.css("color",t.searchResultsText),r.find(".SearchFull-resultsContainer").css({"background-color":t.searchResultsBackground}),c.css("color",t.searchResultsSeparator)},w=function(e){e.css("background-color",t.searchResultsBackground),e.css("border-bottom","1px solid "+t.searchResultsSeparator)},k=function(){var e="";e=i.hasClass("ControlbarTooltip--active")?a.val():s.val(),g=[],v=0,e.length>2?(g=n.search(e,"SearchResult-highlight"),h.toggleTooltipMini(!1),h.toggleTooltipFull(!0),s.val(e),s.focus(),s.val(""),s.val(e),u.empty(),g.length>0?(c.hide(),T()):c.show()):(u.empty(),c.show())},T=function(){var t=u.scrollTop(),n=u.height(),o=(t+n)/u.prop("scrollHeight");if(o>.8&&v<g.length+1){var i=v;$.each(Array(m),function(t){var n=v+t;if(n<g.length){var o=g[n],r=f.clone(),a=r.find(".SearchResult-thumbnail");a.append($("<img>").attr("src",o.pageInfoObject.thumbnail));var s=r.find(".SearchResult-content");s.html(o.snippet),w(r),u.append(r),r.on(b,function(){e.gotoPageNumber(o.pageInfoObject.pageNumber,!0),h.toggleTooltipFull(!1)}),i+=1}}),v=i}};_()},window.ControlBar=function(e,t,n,o){var i,r,a,s,c,u,l,d,p,f,h,g,v,m,b,_,y,w,k,T,x,P,C,S,B,F,I,M,E,N,A,L,H,R,z,D,O=this,q=$("#Template-controlBar"),W={color1:"#b7b7b7",color2:"#ebebeb",background:"#272727",pagerText:"#cccccc",tooltipBackground1:"#121212",tooltipBackground2:"#121212",print1:"#808080",print2:"#FFFFFF",print3:"#ffffff",search1:"#121212",searchScreenBackground:"#000000",searchInputBackground:"#121212",searchInputText:"#cccccc",searchResultsBackground:"#dfdfdf",searchResultsSeparator:"#4a4a4a",searchResultsText:"#4a4a4a"},X={},Y={color1:[".ControlBar-backToBeginningActiveImg svg",".ControlBar-backActiveImg svg",".ControlBar-forwardActiveImg svg",".ControlBar-forwardToEndActiveImg svg",".ControlBar-printButtonImg svg",".ControlBar-downloadButtonImg svg",".ControlBar-searchButtonImg svg",".ControlBar-menuButtonImg svg",".ControlBar-fullscreenButtonImg svg",".PrintMenu-iconImg svg",".SearchMini-searchButtonImg",".SearchFull-searchButtonImg"],color2:[".ControlBar-backToBeginningActiveImgHover svg",".ControlBar-backActiveImgHover svg",".ControlBar-forwardActiveImgHover svg",".ControlBar-forwardToEndActiveImgHover svg",".ControlBar-printButtonImgHover svg",".ControlBar-downloadButtonImgHover svg",".ControlBar-searchButtonImgHover svg",".ControlBar-menuButtonImgHover svg",".ControlBar-fullscreenButtonImgHover svg",".PrintMenu-iconImgHover svg",".SearchMini-searchButtonImgHover",".SearchFull-searchButtonImgHover"],print1:[".PrintMenu-iconImg",".PrintMenu-iconImgHover"],inactive:[".ControlBar-backToBeginningInactiveImg",".ControlBar-backInactiveImg",".ControlBar-forwardInactiveImg",".ControlBar-forwardToEndInactiveImg"]},U={color1:[".SearchFull-closeButtonImg"],color2:[".SearchFull-closeButtonImgHover"],print2:[".PrintMenu-iconImg svg"],print3:[".PrintMenu-iconImgHover svg"]},j=.6,Z=t.zIndex?t.zIndex:2,V="click",G=!0,Q=!0,J=5,K=t.useNavBarMinSizes,ee=t.navbarMinHeight,te=t.navbarMinWidth,ne=t.navBarTablet,oe=t.navBarMobile;this.init=function(){if(q.length>0){e.html(q.html()),i=e.children(".ControlBar"),r=i.children(".ControlBar-content"),i.css("z-index",Z),s=$(".ControlBar-pageNavBar"),c=s.find(".ControlBar-backToBeginningActive"),u=s.find(".ControlBar-backToBeginningInactive"),l=s.find(".ControlBar-backActive"),d=s.find(".ControlBar-backInactive"),p=s.find(".ControlBar-forwardToEndActive"),f=s.find(".ControlBar-forwardToEndInactive"),h=s.find(".ControlBar-forwardActive"),g=s.find(".ControlBar-forwardInactive"),m=s.find(".ControlBar-pageInputContainer"),v=m.find(".ControlBar-pageInput"),a=$(".ControlBar-otherButtons"),b=a.find(".ControlBar-printButton"),_=a.find(".ControlBar-downloadButton"),y=a.find(".ControlBar-searchButton"),w=a.find(".ControlBar-menuButton"),k=a.find(".ControlBar-fullscreenButton"),t.fullScreenEnabled&&!n.getIsMobileDevice()||k.hide(),t.searchButtonEnabled||y.parent().hide(),t.printButtonEnabled&&!n.getIsMobileDevice()||b.parent().hide(),t.navigationButtonsEnabled||s.hide(),t.downloadButtonEnabled&&!n.getIsPhone()||_.hide(),t.thumbnailsButtonEnabled||w.hide(),z=r.innerWidth()-r.width(),B=a.innerWidth(),F=s.innerWidth(),D=r.outerWidth()-B-F,D-=z,F+z>te&&(te=F+z),t.touchControl&&("pointer"===t.touchType||n.getIsMobileDevice())||r.find(".ControlBar-button").addClass("ControlBar-button--hover"),T=c.add(l).add(p).add(h).add(b).add(_).add(y).add(w).add(k),x=a.find(".ControlbarTooltip--print"),x.on("mousedown mouseup",function(e){return e.stopPropagation(),!1}),ie();var o=se(),P={touchControl:o.touchControl,color1:o.color1,search1:o.search1,searchInputBackground:o.searchInputBackground,searchInputText:o.searchInputText,searchResultsBackground:o.searchResultsBackground,searchResultsSeparator:o.searchResultsSeparator,searchResultsText:o.searchResultsText,searchScreenBackground:o.searchScreenBackground};A=new window.SearchManager(n,P,r),!t.touchControl||"pointer"!==t.touchType&&!n.getIsMobileDevice()?H=new window.SearchTooltipManager(n,P,A,O):L=new window.SearchScreenManager(n,P,A),de()}},this.updatePage=function(){var e,o,i,r,a,s,c=n.getCurrentPageNumber(),u=n.getPageInfoList(),l=u[c],d=u[c+1];S=!1,l&&l.__PageNumber>0||(l=d,d=void 0),"undefined"!=typeof d&&d.__PageNumber>0||(S=!0),e=l.__PageName,i=l.__PageNumber,e?o=e:i>0&&(o=i),S||(r=d.__PageName,s=d.__PageNumber,r?a=r:s>0&&(a=s));var p=0;r||e||"number"===$.type(a)&&"number"===$.type(o)&&a>0&&o>0&&(p=1);var f,h,g=t.pagerText.split("~")[p].split("#");S?o&&(f=e?o:g[0]+o+g[1],h=o):(f=e&&r?o+" - "+a:e?o+" - "+g[0]+a+g[1]:r?g[0]+o+g[1]+" - "+a:g[0]+o+g[1]+a+g[2],h=o+"-"+a),h=encodeURI(h),fe(f),O.adjustButtonsToScreenSize(),t.hashControl&&n.updateHash(h),le()},this.getHeight=function(){var e=0;return"undefined"!==$.type(J)&&(e=r.outerHeight()),e},this.adjustButtonsToScreenSize=function(){ne&&n.getIsTablet()?s.hide():oe&&n.getIsPhone()?s.hide():K===!0?ae():re()},this.toggleTooltip=function(e,t){var n=e.hasClass("ControlbarTooltip--active");"undefined"==typeof t&&(t=!n),t&&!n?e.addClass("ControlbarTooltip--active"):!t&&n&&e.removeClass("ControlbarTooltip--active")};var ie=function(){t.controlbarTooltipEnabled&&(R=new window.FlipbookTooltips({el:i.find("div.ControlBar-button[data-tooltip]"),color:t.controlbarTooltipColor,background:t.controlbarTooltipBackground,orientation:"top",margin:45,fixedY:function(){return $(document).height()-i.height()}}),i.find("div.ControlBar-button[data-tooltip]").on(V,R.events.hide))},re=function(){var e=function(e){E?(l.hide(),d.toggle(e)):(l.toggle(e),d.hide()),N?(h.hide(),g.toggle(e)):(h.toggle(e),g.hide())},n=function(e){E?(c.hide(),u.toggle(e)):(c.toggle(e),u.hide()),N?(p.hide(),f.toggle(e)):(p.toggle(e),f.hide())},o=function(e){m.toggle(e)};"undefined"===$.type(I)&&(I=l.width()+h.width(),M=c.width()+I+p.width());var r=I+D+4,v=M+D+8,b=z+B+2,_=z+r+B,y=z+v+B,w=y+m.width()+8+6,k=$(window).width();b>k?G&&(s.hide(),a.hide(),i.hide(),G=!1,Q=!1,J=void 0):k>=b&&_>k?0!==J&&(G=!0,i.show(),a.show(),s.hide(),Q=!1,J=0):k>=_&&y>k?2!==J&&(G=!0,i.show(),e(!0),n(!1),o(!1),a.show(),t.navigationButtonsEnabled&&(s.show(),Q=!0),J=2):k>=y&&w>k?4!==J&&(G=!0,i.show(),e(!0),n(!0),o(!1),a.show(),t.navigationButtonsEnabled&&(s.show(),Q=!0),J=4):5!==J&&(G=!0,i.show(),e(!0),n(!0),o(!0),a.show(),t.navigationButtonsEnabled&&(s.show(),Q=!0),J=5)},ae=function(){var e=$(window).width(),n=$(window).height();Q&&(te>e||ee>n)?(s.hide(),Q=!1,G||i.hide()):Q||e>te&&n>ee&&(t.navigationButtonsEnabled&&(s.show(),Q=!0),i.is(":visible")||i.show());var o=F;Q||(o=0),G&&B+o>e?(a.hide(),Q||i.hide(),G=!1):!G&&e>B+o&&(a.show(),i.is(":visible")||i.show(),G=!0)},se=function(){X=$.extend({},W),"object"==typeof t.colors&&$.each(t.colors,function(e,t){X[e]=t}),X.inactive=ve(X.color1),$.each(Y,function(e,t){$.each(t,function(t,n){$(n).css("fill",X[e])})}),$.each(U,function(e,t){$.each(t,function(t,n){$(n).css("color",X[e])})}),r.css("background-color",X.background),v.css("color",X.pagerText);var e=x.add(P).add(C);return e.css("background-color",X.tooltipBackground1),e.find(".ControlbarTooltip-arrow").css("border-top","solid "+X.tooltipBackground1+" 10px"),$(".PrintMenu-choice").css("background-color",X.tooltipBackground2),$(".PrintMenu-caption").css("color",X.color1).hover(function(e){$(this).css("color","mouseenter"===e.type?X.color2:X.color1)}),X},ce=function(e){"undefined"===$.type(E)&&(E=l.is(":hidden")),E&&e?(J>=2&&(l.show(),d.hide()),J>=4&&(c.show(),u.hide())):E||e||(J>=2&&(l.hide(),d.show()),J>=4&&(c.hide(),u.show())),E=!e},ue=function(e){"undefined"===$.type(N)&&(N=h.is(":hidden")),N&&e?(J>=2&&(h.show(),g.hide()),J>=4&&(p.show(),f.hide())):N||e||(J>=2&&(h.hide(),g.show()),J>=4&&(p.hide(),f.show())),N=!e},le=function(){if(!t.navigationLoop){var e=n.getCurrentPageNumber();e>0?ce(!0):0===e&&ce(!1),e<n.getLastPageNumber()-1?ue(!0):e===n.getLastPageNumber()-1&&ue(!1)}},de=function(){T.not(w).on(V,function(e){e.preventDefault(),n.hideThumbnails()}),r.on("mousedown mouseup",function(e){return e.stopPropagation(),!1}),c.on(V,function(e){e.preventDefault(),n.gotoFirstPage(!0)}),l.on(V,function(e){e.preventDefault(),n.gotoPrevPage(!0)}),h.on(V,function(e){e.preventDefault(),n.gotoNextPage(!0)}),p.on(V,function(e){e.preventDefault(),n.gotoLastPage(!0)}),pe(),he(),_.on(V,function(e){e.preventDefault(),n.download()}),w.on(V,function(e){e.preventDefault(),n.getIsThumbnailMode()?(w.data("tooltip-hidden",!1),n.hideThumbnails()):(w.data("tooltip-hidden",!0),n.showThumbnails())}),T.not(w).on(V,function(e){n.getIsThumbnailMode()&&n.hideThumbnails()}),k.on(V,function(e){e.preventDefault(),n.getIsFullScreen()?n.exitFullScreen():n.enterFullScreen()}),ge()},pe=function(){var e,t=function(){var t=v.val(),o=parseInt(t,10);!isNaN(o)||o>n.getLastPageNumber()?n.gotoPageNumber(o,!0):v.val(e),fe()};v.on("click",function(){v.focus()}),v.on("focus",function(){e=v.val(),v.val("")}),v.on("blur",t),v.keypress(function(e){13===e.which&&(n.getIsFullScreen()?t():v.trigger("blur"))})},fe=function(e){"undefined"===$.type(e)&&(e=v.val());var t=35;e.length>5&&(t+=6*(e.length-5)),t+=2,m.css({width:t}),v.val(e)},he=function(){var e=function(){O.toggleTooltip(x,!1),b.data("tooltip-hidden",!1)};b.on(V,function(){S?(e(),n.printBoth()):(O.toggleTooltip(x),"undefined"!==$.type(H)&&(H.toggleTooltipMini(!1),H.toggleTooltipFull(!1)),b.data("tooltip-hidden",!0))}),y.add(w).add(_).add(k).on(V,function(){O.toggleTooltip(x,!1)}),x.find(".PrintMenu-choice--left").on(V,function(t){t.preventDefault(),n.printLeft(),e()}),x.find(".PrintMenu-choice--right").on(V,function(t){t.preventDefault(),n.printRight(),e()}),x.find(".PrintMenu-choice--both").on(V,function(t){t.preventDefault(),n.printBoth(),e()}),n.addEventHandler(["onPageChange","onZoomIn","onZoomOut","onLinkClicked"],e),v.on("focus",e),o.addEventHandler("onVideoFrameClick",e)},ge=function(){var e=!1,t=function(){e&&("undefined"===$.type(L)?(e=!1,y.data("tooltip-hidden",!1),"undefined"!==$.type(H)&&(H.toggleTooltipMini(!1),H.toggleTooltipFull(!1))):L.closeSearchScreen())},i=function(){e||("undefined"===$.type(L)?(e=!0,y.data("tooltip-hidden",!0),"undefined"!==$.type(H)&&H.toggleTooltipMini(!0)):L.openSearchScreen())};y.find("svg").on(V,function(){e?t():i()}),b.add(w).add(_).add(k).on(V,t),"undefined"!==$.type(H)&&H.addEventHandler("closeButtonClick",t),n.addEventHandler(["onPageChange","onZoomIn","onZoomOut","onLinkClicked"],t),v.on("focus",t),o.addEventHandler("onVideoFrameClick",t)},ve=function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,o){return t+t+n+n+o+o});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),o=e;if($.isArray(n)&&n.length>3){var i=parseInt(n[1],16),r=parseInt(n[2],16),a=parseInt(n[3],16),s=0,c=0,u=0,l=j,d=Math.ceil(s*l)+Math.ceil(i*(1-l)),p=Math.ceil(c*l)+Math.ceil(r*(1-l)),f=Math.ceil(u*l)+Math.ceil(a*(1-l));o="#"+((1<<24)+(d<<16)+(p<<8)+f).toString(16).slice(1)}return o};this.init()};var _gaq=_gaq||[],userAgent=navigator.userAgent||navigator.vendor||window.opera;if(/Presto/i.test(userAgent)||/Android 2\./i.test(userAgent))throw new Error("use_fallback");!function(e,t,n){"use strict";var o,i,r,a,s,c,u,l,d,p,f,h,g,v,m,b,_,y,w,k,T,x,P,C,S,B,F,I,$,M,E,N,A,L,H,R,z,D,O,q,W,X,Y,U,j,Z,V,G,Q,J,K,ee,te,ne,oe,ie,re,ae,se,ce,ue,le,de,pe,fe,he,he,ge,ve,me,be,_e,ye,we,ke,Te,xe,Pe,Ce,Se,Be,Fe,Ie,$e,Me,Ee,Ne,Ae,i,Le,He,Re,ze,De,Oe,qe,We,Xe,Ye,Ue,je,Ze,Ve,Ge,Qe,Je,Ke,et,tt,nt,ot,it,rt,at,st,ct,ut,lt,dt,pt,ft,ht,gt,vt,mt,bt,_t,yt,wt,kt,Tt,xt,Pt,Ct,St,Bt,Ft,It,$t,Mt,Et,Nt,At,Lt,Ht,Rt,zt,Dt,Ot,qt,Wt,Xt,Yt,Ut,jt,Zt,Vt,Gt,Qt,Jt,Kt,en,tn,nn,on,rn,an,sn,cn,un,ln,dn,pn,fn,hn,gn,vn,mn,bn,_n,yn,wn,kn,Tn,xn,Pn,Cn,Sn,Bn,Fn,In,$n,Mn,En,Nn,An,Ln,Hn,Rn,zn,Dn,On,qn,Wn,Xn,Yn,Un,jn,Zn,Vn,Gn,Qn,Jn,Kn,eo,to,no,oo,io,ro,ao,so,co,uo,lo,po,fo,ho,go,vo,mo,bo,_o,yo,wo,ko,To,xo,Po,Co,So,Bo,Fo,Io,$o,Mo,Eo,No,Ao,Lo,Ho,Ro,zo,Do,Oo,qo,Wo,Xo=!1,Yo=!1,Uo="",jo=700,Zo=500,Vo=!1,Go={},Qo=!0,Jo=700,Ko=500,ei=!1,ti=!1,ni=ti,oi=!0,ii=!0,ri=.1,ai=.3,si=.15,ci=.15,ui=e(),li={},di=[],pi=Math,fi=pi.PI,hi=["left","right"],gi=!1,vi=!0,mi=pi.sin,bi=pi.asin,_i=pi.cos,yi=pi.sqrt,wi=pi.abs,ki=pi.floor,Ti=pi.ceil,xi=pi.round,Pi=pi.random,Ci="auto",Si=85,Bi=function(t){var o,Qe=.3;"string"===e.type(t.IncDirPath)&&(Uo=t.IncDirPath),r=t.IDs,a=t.DefaultID,s=t.PageWidth||300,c=t.PageHeight||400,u=t.CoverWidth||s,l=t.CoverHeight||c,f="undefined"===e.type(t.HardCover)?!1:t.HardCover,h=t.HardPages||gi,d=t.StageWidth,p=t.StageHeight,v="undefined"===e.type(t.DoubleTapZoomSpeed)?18:t.DoubleTapZoomSpeed,U=t.VerticalMode||gi,Ee=t.SinglePageDesktopMode||gi,Ne="undefined"===e.type(t.SinglePageMobileMode)?!0:t.SinglePageMobileMode,j=t.RightToLeft&&!U||gi,k=t.AutoScale||vi,T=t.FullScale||vi,x=t.FillScale||gi,P=t.UpScale||gi,t.CenterSinglePage="undefined"!==e.type(t.CenterSinglePage)?t.CenterSinglePage:!0,C="undefined"===e.type(t.AutoStageHeight)?gi:Boolean(t.AutoStageHeight),Q="undefined"===e.type(t.ControlbarEnabled)?!0:Boolean(t.ControlbarEnabled),R="undefined"===e.type(t.SearchButtonEnabled)?vi:Boolean(t.SearchButtonEnabled),z="undefined"===e.type(t.PrintButtonEnabled)?gi:Boolean(t.PrintButtonEnabled),q="undefined"===e.type(t.ThumbnailsButtonEnabled)?vi:Boolean(t.ThumbnailsButtonEnabled),Xo=function(e){var t=/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|meego.+mobile|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e);return!(!t&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))}(userAgent),Yo=Boolean(userAgent.match(/iPad|Android|(?=.*\bWindows\b)(?=.*\bARM\b)/i));var Je=32;Xo||Yo?(Ae=Ne,f&&(f=!1),h&&(h=!1),Ae&&(Je=10),"boolean"===e.type(t.ControlbarEnabledMobile)&&(Q=t.ControlbarEnabledMobile)):Ae=Ee,m="undefined"===e.type(t.Margin)?Je:t.Margin,b="undefined"===e.type(t.MarginTop)?m:t.MarginTop,_="undefined"===e.type(t.MarginBottom)?m:t.MarginBottom,y="undefined"===e.type(t.MarginLeft)?m:t.MarginLeft,w="undefined"===e.type(t.MarginRight)?m:t.MarginRight,g=Ae?gi:Boolean(t.CenterSinglePage),F=Ae?vi:t.ScaleToSinglePage||gi,Z=Ae?gi:t.AlwaysOpened||gi,Ve={},Ve.pageFlipping={},Ve.pageFlipping.src="undefined"!==e.type(t.FlippingSoundSrc)?t.FlippingSoundSrc:Uo+"inc/sound/flip.mp3",Ve.pageFlipping.volume="undefined"!==e.type(t.FlippingSoundVolume)?t.FlippingSoundVolume:0,(T||x||P)&&(C=gi),S=t.AutoMaxHeight||gi,B=t.MaxHeightOffset||0,I=t.FlexibleContent||gi,o=t.FlexibleContentMinWidth,$=o==n?768:o,o=t.StartPage,M=o==n?1:o,E=t.MinPageLimit||0,E>M&&(M=E),N=t.MaxPageLimit,A=t.StartAutoFlip||!1,o=t.AutoFlipEnabled,L=o==n?!0:o,H="undefined"===e.type(t.FullScreenEnabled)?vi:Boolean(t.FullScreenEnabled),je="undefined"===e.type(t.BackgroundColor)?"#d4d4d4":t.BackgroundColor,Ze="undefined"===e.type(t.BackgroundImage)?null:t.BackgroundImage,W=t.AutoFlipInterval||2e3,o=t.AutoFlipLoop,X=o==n?!1:o,Y=t.NavigationLoop||gi,o=t.Preflip,V=o==n?vi:o,G=t.ControlbarToFront||vi,J="undefined"===e.type(t.Thumbnails)?vi:Boolean(t.Thumbnails),o=t.ThumbnailsLazyLoad,K=o==n?vi:o,o=t.ThumbnailsToFront,ee=o==n?gi:o,te=t.ThumbnailsAutoHide||0,ne=t.ThumbnailsHidden||vi,oe=t.ThumbnailWidth||60,ie=t.ThumbnailHeight||80,re=t.ThumbnailAlwaysCentered||gi,J||(q=!1),ae=t.Transparency||gi,o=t.PageCache,se=o==n?5:o,ce=t.NoFlipShadow||gi,o=t.DropShadow,ue=o==n?vi:o,o=t.Emboss,le=o==n?vi:o,o=t.DropShadowOpacity,de=o==n?.2:o,o=t.FlipTopShadowOpacity,pe=o==n?.2:o,o=t.FlipShadowOpacity,fe=o==n?.2:o,o=t.EmbossOpacity,ge=o==n?.2:o,o=t.HardFlipShadowOpacity,he=o==n?Qe:o,ve=t.PreflipArea||128,me=t.SecondaryDragArea||64,be=Ae?ve:t.InsideDragArea||0,_e=t.FlipDuration||400,ye=t.BookOffsetX||0,we=t.BookOffsetY||0,Ae&&(U?we-=l/2:j?ye+=u/2:ye-=u/2),ke=Tt?t.PerformanceAware||gi:vi,Te=t.PagerText||"#~##",o=t.PagerSkip,xe=o==n?vi:o,o=t.HashControl,$e=o==n?vi:o,o=t.ZoomEnabled,Pe=o==n?vi:o,Ce=t.ClickZoom||vi,o=t.ZoomFlip,Se=o==n?vi:o,o=t.PinchZoom,Be=o==n?gi:o,o=t.MouseControl,Fe=o==n?vi:o,Ie=t.GoogleAnalytics,Me=t.DisableSelection||vi,i="undefined"!=typeof t.DownloadUrl?t.DownloadUrl:null,O="undefined"!=typeof t.DownloadButtonEnabled?t.DownloadButtonEnabled:!1,i||(O=!1),Xe="undefined"!==e.type(t.LinksTooltipEnabled)?t.LinksTooltipEnabled:!1,Xe&&"undefined"!==e.type(nn)&&(Xe=!1),He=t.LinksTooltipColor||"#FFFFFF",Re=t.LinksTooltipBackground||"#333333",ze=t.LinksTooltipText||"Click to open this link",De="undefined"!=typeof t.LinkFading?t.LinkFading:!1,Oe=t.LinkBackground||"#0000ff",We="undefined"!=typeof t.ControlbarTooltipEnabled?t.ControlbarTooltipEnabled:!1,qe="undefined"!==e.type(t.InvisibleLinks)?t.InvisibleLinks:!1,1==qe&&(Oe="transparent"),Ye=t.ControlbarTooltipColor||"#FFFFFF",Ue=t.ControlbarTooltipBackground||"#000000","undefined"!==e.type(t.MobileImageMaxHeight)&&(jo=t.MobileImageMaxHeight),"undefined"!==e.type(t.MobileImageMaxWidth)&&(Zo=t.MobileImageMaxWidth),Vo="undefined"!==e.type(t.NavigationArrowsEnabled)?t.NavigationArrowsEnabled:!1,D="undefined"!==e.type(t.NavigationButtonsEnabled)?t.NavigationButtonsEnabled:!Vo,Go.color="undefined"!==e.type(t.NavigationArrowsColor)?t.NavigationArrowsColor:"#b5b5b5",Go.hoverColor="undefined"!==e.type(t.NavigationArrowsHover)?t.NavigationArrowsHover:"#ffffff",Le={},"undefined"!==e.type(t.ControlbarColor1)&&(Le.color1=t.ControlbarColor1),"undefined"!==e.type(t.ControlbarColor2)&&(Le.color2=t.ControlbarColor2),"undefined"!==e.type(t.ControlbarBackground)&&(Le.background=t.ControlbarBackground),"undefined"!==e.type(t.ControlbarPagerText)&&(Le.pagerText=t.ControlbarPagerText),"undefined"!==e.type(t.ControlbarTooltipBackground1)&&(Le.tooltipBackground1=t.ControlbarTooltipBackground1),"undefined"!==e.type(t.ControlbarTooltipBackground2)&&(Le.tooltipBackground2=t.ControlbarTooltipBackground2),"undefined"!==e.type(t.ControlbarPrint1)&&(Le.print1=t.ControlbarPrint1),"undefined"!==e.type(t.ControlbarPrint2)&&(Le.print2=t.ControlbarPrint2),"undefined"!==e.type(t.ControlbarPrint3)&&(Le.print3=t.ControlbarPrint3),"undefined"!==e.type(t.ControlbarSearch1)&&(Le.search1=t.ControlbarSearch1),"undefined"!==e.type(t.ControlbarSearchScreenBackground)&&(Le.searchScreenBackground=t.ControlbarSearchScreenBackground),"undefined"!==e.type(t.ControlbarSearchInputBackground)&&(Le.searchInputBackground=t.ControlbarSearchInputBackground),"undefined"!==e.type(t.ControlbarSearchInputText)&&(Le.searchInputText=t.ControlbarSearchInputText),"undefined"!==e.type(t.ControlbarSearchResultsBackground)&&(Le.searchResultsBackground=t.ControlbarSearchResultsBackground),"undefined"!==e.type(t.ControlbarSearchResultsSeparator)&&(Le.searchResultsSeparator=t.ControlbarSearchResultsSeparator),"undefined"!==e.type(t.ControlbarSearchResultsSeparator)&&(Le.searchResultsText=t.ControlbarSearchResultsSeparator),"undefined"!==e.type(t.ZoomCursorColor)&&(Ge=t.ZoomCursorColor),"undefined"!==e.type(t.ZoomCursorEnabled)&&(ii=t.ZoomCursorEnabled),"undefined"!==e.type(t.NavbarMinHeight)&&(Jo=t.NavbarMinHeight),"undefined"!==e.type(t.NavbarMinWidth)&&(Ko=t.NavbarMinWidth),"undefined"!==e.type(t.UseNavBarMinSizes)&&(ei=t.UseNavBarMinSizes),"undefined"!==e.type(t.NavBarMobile)&&(ti=t.NavBarMobile,ni=ti),"undefined"!==e.type(t.ChangeQualityOnMobile)&&(oi=t.ChangeQualityOnMobile)},Fi=function(){vt=mt=0,bt=1,uo=gi,Si*=2,cn=Si+10,un=2,sn=cn/un,ln=sn+10,an=cn/fi,Ii()},Ii=function(){ht=2*u,gt=1*l,U&&(ht=u,gt=2*l),Ae&&(ht=u,gt=l),_t=u>s||l>c,yt=2*Ti(qr(s,c)/2),wt=2*Ti(qr(u,l)/2),dn=U?1:2,pn=3-dn,fn=U?-1:1},$i=function(){jt=[],Zt=[],Qt=[],Vt=[],Gt=[]},Mi=function(){xt=gi,Ct=[],Ro=[],Mt=4,At=gi,Lt=gi,Ht=gi,Rt=gi,zt=gi,Wt=Xt=Yt=Ut=0,hn=gn=vn=mn=bn=_n=yn=wn=n},Ei=function(){Qt=[],Zt=[],Vt=[],et.empty(),Wi()},Ni=function(t){$i();for(var n,o,i,r,a,s,c=0,u=0,l=0,d=1,p=gi;u<t.length;u++)o=e(t[u]),n=o.attr("class"),i="cover"===n,i&&(p=i),r="outerpage"===n,Ae&&(r=!1),a=r||i,(i||"page"===n||r)&&(0!==c||r||Z?Ae&&Ri(l++,zi(e("<div class='page'></div>"),!0,i,void 0,l)):Ri(l++,{__PageNumber:0,__notEmpty:gi}),0===c&&r&&(Z=gi),s=zi(o,r,i,a,l),"undefined"===e.type(s.__PageNumber)?s.__PageNumber=d++:s.__PageNumber>0&&(d=s.__PageNumber+1),Ri(l++,s),c++);if(ft=l-1,f){var h=jt[ft];"undefined"!==e.type(h)&&(h.__isHard=!0)}Hi(),j&&jt.reverse(),p||(_t=gi),os(E,N),es()},Ai=function(t,n,o){n=n||pt,o=o||gi,0!=n||Z||n++;for(var i,r,a,s,c,u,l=0,d=0,p=gi;d<t.length;d++)r=e(t[d]),a="cover"==(i=r.attr("class")),a&&(p=a),s="outerpage"==i,c=s||a,(a||"page"==i||s)&&(u=zi(r,s,a,c,d),ft++,jt.splice(n,0,u),l++);Hi(),os(),es(),Ei()},Li=function(e,t,n){e=e||pt,t=t||1,n=n||gi,0!=e||Z||e++,jt.splice(e,t),ft-=t,Hi(),os(),es(),pt>ft&&(pt=ft-ft%2),0>pt&&(pt=0),Ei()},Hi=function(){ft%2==0&&(jt[ft].__notEmpty?Ri(++ft,{__PageNumber:0,__notEmpty:gi}):(jt.splice(ft,1),ft--))},Ri=function(e,t){jt[e]=t},zi=function(t,n,o,i,r){n=n||gi,o=o||1===r,o||"undefined"===e.type(N)||(o=Ae?r===N-2:r===N-1),i=i||gi;var a=t.data(),d=a.disableEmbossing,p=h||a.hard===!0;f&&o&&(p=!0);var g={__Unload:!(a.unload==gi),__BackgroundFiles:[],__HtmlFile:a.htmlFile,__HtmlData:t.html(),__ThumbnailImageUrl:a.thumbnailImage,__ThumbnailImage:void 0,__DisableEmbossing:"undefined"===e.type(d)?!le:d,__TransparentPage:a.transparentPage==vi,__RemovablePage:a.removablePage==vi,__PageNumber:n?0:a.pageNumber,__PageName:a.pageName,__PageLabel:a.pageLabel,__AutoFlipInterval:a.autoFlipInterval,__Data:a.data,__renderWidth:i?u:s,__renderHeight:i?l:c,__maskSize:o?wt:yt,__isHard:p,__isCover:i,__outer:n,__notEmpty:vi};return"undefined"!==e.type(a.backgroundFileDesktop)&&g.__BackgroundFiles.push({type:"desktop",url:a.backgroundFileDesktop,set:!1}),"undefined"!==e.type(a.backgroundFileMobile)&&g.__BackgroundFiles.push({type:"mobile",url:a.backgroundFileMobile,set:!1}),g.__isHard&&(g.__DisableEmbossing=vi),g.__isLoaded=!g.__HtmlFile,g},Di=function(e){yn=e>yn?e:yn},Oi=function(e){bn=e>bn?e:bn},qi=function(){var e=ye-(g&&!U?xi((yn-bn)/2):0),t=we-(g&&U?xi((yn-bn)/2):0);Vo&&.01>Hn&&ct.shift(e,t),vt==e&&mt==t||(kt=!0,vt=e,mt=t,tt.css({transform:Or(vt,mt)}))},Wi=function(){var t=Zt,o=Qt,i=[],r=[],a=[],s=[],c=[],p=pt,g=pt+1;if(bn=yn=gn=mn=0,Pt=[],xt){0>St?p=$t:g=$t+1;for(var v,m,b=0;b<Ct.length;b++)v=Ct[b].__startPagePN,m=Ct[b].__endPagePN,jt[v].__flip=jt[m].__flip=jt[m].__animated=vi,jt[v].__animated=gi,1!=Ct[b].__flipType?(Pt.splice(0,0,v),Pt.push(m)):(Pt.splice(b,0,m),Pt.splice(b,0,v)),Ct[b].__started||(c.push({e:0,p:v}),c.push({e:0,p:m}),Ct[b].__started=vi),jt[v].__onTop&&(xs(3,v),jt[v].__onTop=gi),jt[m].__onTop&&(xs(3,m),jt[m].__onTop=gi)}Qt=[];for(var _=p,y=jt[_].__notEmpty,w=y?se:0;_>=0;)y||jt[_].__isCover&&!jt[_].__outer&&_t?(i.push(_),y=ae&&jt[_].__TransparentPage):w>0&&(jt[_].__notEmpty&&Qt.push(_),jt[_+1].__notEmpty&&Qt.push(_+1),w--),!y&&0==w&&_>4?_=2:_-=2;var k=g;for(y=jt[k].__notEmpty,w=y?se:0;ft>=k;)y||jt[k].__isCover&&!jt[k].__outer&&_t?(r.push(k),y=ae&&jt[k].__TransparentPage):w>0&&(jt[k-1].__notEmpty&&Qt.push(k-1),jt[k].__notEmpty&&Qt.push(k),w--),!y&&0==w&&ft-4>k?k=ft-2:k+=2;Zt=[];for(var T,x,P=i.length,C=r.length,S=P>C?P:C,b=0;S>b;b++)C>b&&(x=r[b],T=jt[x],Di(U?T.__renderHeight:T.__renderWidth),T.__outer||(mn=yn),Zt.splice(0,0,x),T.__flip=gi,0!=b||xt?T.__onTop&&(xs(3,x),T.__onTop=gi):T.__onTop||(c.push({e:2,p:x}),T.__onTop=vi)),P>b&&(x=i[b],T=jt[x],Oi(U?T.__renderHeight:T.__renderWidth),T.__outer||(gn=bn),Zt.splice(0,0,x),jt[i[b]].__flip=gi,0!=b||xt?T.__onTop&&(xs(3,x),T.__onTop=gi):T.__onTop||(c.push({e:2,p:x}),T.__onTop=vi));hn=bn,vn=yn,xt?Zt=Zt.concat(Pt):qi(),(!xt||f&&!ke)&&xt||Ji(gn,mn);for(var b=0;b<Zt.length;b++)x=Zt[b],t.lastIndexOf(x)<0&&a.push(x);a=a.concat(Qt);for(var b=0;b<t.length;b++)x=t[b],Zt.lastIndexOf(x)<0&&s.push(x);for(var b=0;b<o.length;b++)x=o[b],Qt.lastIndexOf(x)<0&&Zt.lastIndexOf(x)<0&&s.push(x);for(var B,b=0;b<s.length;b++)B=s[b],H=Vt.lastIndexOf(B),x=jt[B],x.__onTop&&(xs(3,B),c.push({e:3,p:B}),T.__onTop=gi),x.__Unload!==gi?(H>=0&&Vt.splice(H,1),xs(5,B),x.$p.remove(),x.__masked&&(x.__masked=gi,x.$m.remove(),x.$fsc&&x.$fsc.remove()),x.$hts&&(x.$hts.remove(),x.$hts=n)):0>H&&(x.__masked&&Gi(B),x.$p.css("display","none"),Vt.push(B),c.push({e:7,p:B}));var F,I,$,M,E,N,A,L,H,R;e.each(Array(a.length),function(t){F=a[t],H=Vt.lastIndexOf(F),R=Qt.lastIndexOf(F),H>=0?0>R&&(Vt.splice(H,1),jt[F].$p.css("display",""),c.splice(0,0,{e:8,p:F})):(0>R&&c.splice(0,0,{e:8,p:F}),et.append(Ir(F)),I=jt[F].$p=Mr(F),c.splice(0,0,{e:4,p:F}),M=jt[F].__renderWidth,E=jt[F].__renderHeight,U?(A=(u-M)/2,N=F%2?l:l-E,L=Ci):Ae?(N=(l-E)/2,A=F%2?u/2:u-M,L=F%2?u-M:Ci):(N=(l-E)/2,A=F%2?Ci:u-M,L=F%2?u-M:Ci),I.css({position:"absolute",overflow:"hidden",width:M,height:E,top:N,left:A,right:L}),$=jt[F].$c=Er(F),"undefined"!==e.type(d)&&Vi(F),$.html(jt[F].__HtmlData),jt[F].__HtmlFile&&$.load(jt[F].__HtmlFile,"GET"),jt[F].__isCover||jt[F].__DisableEmbossing||($.after($r("pf-emboss-"+(F%2?"right":"left"),"page"+F+"emboss")),Nr(F).css({position:"absolute",overflow:"hidden",width:U?E/7:M/7,height:U?M:E,top:U?F%2?-M/2:E-M/2:0,left:U?F%2?"50%":Ci:F%2?0:Ci,right:U?F%2?Ci:"50%":F%2?Ci:0,"transform-origin":U?F%2?"0% 50%":"100% 50%":"",transform:U?"rotate(90deg)":"",opacity:ge})),R>=0&&(I.css("display","none"),Vt.push(F),c.push({e:7,p:F})))});for(var F,z,I,M,E,b=0,D=2;b<Zt.length;b++)if(F=Zt[b],z=jt[F],I=z.$p,M=z.__renderWidth,E=z.__renderHeight,z.__flip&&z.__masked)!ce&&z.__animated&&z.$fsc.css({"z-index":D++}),z.$m.css({"z-index":D++});else if(z.__flip&&!z.__masked)if(2==Bt){var O=D++;I.css({"z-index":O,"transform-origin":U?F%2?"50% 0%":"50% 100%":F%2?"0% 50%":"100% 50%","backface-visibility":"hidden"}),F%2==0&&(f&&F-1===1||h)&&Ae&&I.css("display","none"),ce||z.$hts||(z.$c.after($r("pf-hard-topshadow","page"+F+"hardtopshadow")),z.$hts=Dr(F),z.$hts.css({position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(0,0,0,"+he+")"}))}else{I.wrap($r("pf-mask","page"+F+"mask")),z.$m=Ar(F);var q=z.__maskSize,W=-z.__animated;z.$m.css({position:"absolute",right:U?Ci:"50%",top:U?l-q:(l-q)/2,left:U?(u-q)/2:Ci,width:q,height:q,"transform-origin":U?"50% 100%":"100% 50%",overflow:"hidden"}),I.css({top:U?Ci:(q-E)/2,bottom:U?F%2?-E:0:Ci,left:Ci,right:U?(q-M)/2:F%2?-M:0,"z-index":""}),ce||W&&(z.$c.after($r("pf-flip-topshadow","page"+F+"fliptopshadow")),z.$fts=zr(F),z.$fts.css({position:"absolute",
top:(E-q)/2,left:M/2-ln,width:ln,height:q,"transform-origin":"100% 50%",overflow:"hidden",opacity:pe}),z.$m.before($r("pf-flip-shadow-container","page"+F+"flipshadowcontainer",$r("pf-flip-shadowA","page"+F+"flipshadowA")+$r("pf-flip-shadowB","page"+F+"flipshadowB"))),z.$fsc=Lr(F),z.$fsA=Hr(F),z.$fsB=Rr(F),Qi(F,D++,E,M,q)),z.$m.css({"z-index":D++}),z.__masked=vi}else!z.__flip&&z.__masked?(Gi(F),I.css("z-index",D++)):(z.$hts&&(z.$hts.remove(),z.$hts=n),I.css("z-index",z.__outer?0:D++));for(b=0;b<c.length;b++)xs(c[b].e,c[b].p);mr(),J&&Ha(),Xi()},Xi=function(t){ii&&("number"!==e.type(Hn)||xt||Ro&&Ro.length>0||Ct&&Ct.length>0?dt.setCursor(e(".pf-page-cursoroverlay")):Hn>.02&&"undefined"===e.type(t)||"zoomout"===t?dt.setCursor(e(".pf-page-cursoroverlay"),"zoomout"):(.02>Hn&&"undefined"===e.type(t)||"zoomin"===t)&&(1>bt?dt.setCursor(e(".pf-page-cursoroverlay"),"zoomin"):dt.setCursor(e(".pf-page-cursoroverlay"))))},Yi=function(){e.each(jt,function(t,n){"undefined"!==e.type(n.$p)&&n.$p.length>0&&Vi(t)})},Ui=function(e,t){e.css({"background-image":"none"}),setTimeout(function(){e.css({"background-image":"url('"+t+"')","background-size":"100% auto"})},50)},ji=function(e,t){var n=24,o=n;if(t){var i=bt+Ln*Hn;o=n/i}e.css({"background-image":'url("'+Uo+'inc/img/loader.gif")',"background-color":"white","background-repeat":"no-repeat","background-position":"50% 50%","background-size":o+"px "+o+"px"})},Zi=function(t,n){var o=function(n){var i;if("undefined"===e.type(jt[n].__ThumbnailImage)){if(i=e.Deferred(),t.css("background-image")!=='url("'+Uo+'inc/img/loader.gif")'&&ji(t,!1),"undefined"!==e.type(jt[n].__ThumbnailImageUrl)){var r=jt[n].__ThumbnailImageUrl,a=new Image;a.onload=i.resolve.bind(i,a),a.src=r,a.loadingPromise=i,a.onerror=function(){setTimeout(function(){o(n).done(function(e){jt[n].__ThumbnailImage=e,i.resolve(e)})},500)}}}else"resolved"!==jt[n].__ThumbnailImage.loadingPromise.state()&&t.css("background-image")!=='url("'+Uo+'inc/img/loader.gif")'&&ji(t,!1),i=jt[n].__ThumbnailImage.loadingPromise;return i};return o(n)},Vi=function(t){var n=function(o,i,r){"undefined"===e.type(di[o])&&(di[t]={});var a;if("undefined"===e.type(di[o][i])){a=e.Deferred(),ji(e("#page"+o),!0);var s=new Image;s.onload=a.resolve.bind(a,s),s.src=r,s.loadingPromise=a,s.onerror=function(){setTimeout(function(){n(o,i,r).done(function(e){di[o][i]=e,a.resolve(e)})},500)}}else"resolved"!==di[o][i].loadingPromise.state()&&ji(e("#page"+o)),a=di[o][i].loadingPromise;return a},o=[];o="undefined"===e.type(t)?[pt,pt+1]:[t],e.each(o,function(o,i){if("undefined"!==e.type(jt[i])&&"undefined"!==e.type(jt[i].__BackgroundFiles)){var r=jt[i].__BackgroundFiles;if(r.length>0){var a=0;if(r.length>1&&(Qo||(a=1)),!r[a].set||i!==pt&&i!==pt+1){!r[a].set&&r.length>1&&(r[Math.abs(a-1)].set=!1);var s=r[a].type,c=r[a].url;n(t,s,c).done(function(){Ui(e("#page"+i),r[a].url),r[a].set=!0})}}}})},Gi=function(e){var t=jt[e],o=t.$p,i=t.__renderWidth,r=t.__renderHeight;o.unwrap();var a=U?Ci:e%2?Ci:u-i;Ae&&(a=e%2?u/2:u-i),o.css({top:U?e%2?l:l-r:(l-r)/2,left:a,right:U?(u-i)/2:e%2?u-i:Ci,"transform-origin":"","backface-visibility":""}),t.$fsc&&(t.$fsc.remove(),t.$fsc=t.$fsA=t.$fsB=n),t.$fts&&(t.$fts.remove(),t.$fts=n),t.__masked=gi},Qi=function(e,t,n,o,i){var r=U?(u-o)/2:u-o;Ae&&(r=-u/2),jt[e].$fsc.css({"z-index":t++,position:"absolute",top:U?l-n:(l-n)/2,left:r,width:U?o:2*o,height:U?2*n:n,overflow:"hidden",opacity:fe}),jt[e].$fsA.css({position:"absolute",top:U?n-i:n/2-i,right:U?o/2:o,width:ln,height:2*i,"transform-origin":"100% 50%",overflow:"hidden"}),jt[e].$fsB.css({position:"absolute",top:U?n-i/2:(n-i)/2,left:U?o/2:o,width:ln,height:i,"transform-origin":"0% 50%",overflow:"hidden"})},Ji=function(e,t){if(ui.length>0&&(e!==_n||t!==wn)){_n=e,wn=t;var n=(e+t)/(U?gt:ht);U?nt.css("transform",Or(0,gt/2-e)+"scaleY("+n+")"):nt.css("transform",Or(ht/2-e,0)+"scaleX("+n+")")}},Ki=function(e,t,n,o,i,r,a,s){if(zt)return gi;a=a||e,s=s||t;var c=Ct.length,u=It,r=r||2,i=i||0;if(c>=Mt)return gi;if(u=0==c?pt:$t,r+=r%2,0>o&&E>u-r)return gi;if(o>0&&u+r>N)return gi;var l,d=u+(o>0?1:0),p=u+(r-(0>o?1:0))*o;if(l=jt[d].__isHard||jt[p].__isHard?2:i,0==c)xt=vi,St=o,Bt=l,xs("onFlippingSequenceStarted");else if(St!=o||Bt!=l)return gi;0!==n&&1!==n&&4!==n||xs("onAutoFlippingSequenceStarted"),Ft=n,It=u,$t=u+r*o;var f=1==Bt;return Ct[c]=or({__startPN:It,__endPN:$t,__startPagePN:f?p:d,__endPagePN:f?d:p,__flipMode:n,__flipType:Bt,__dir:o,__started:gi,__success:gi},e,t),Wi(),(a||s)&&ir(Ct[c],a*fn,s),vi},er=function(e,t,n,o,i){return n=n||e.__dir,e.__dir!=n||0==e.__flipMode||4==e.__flipMode||5==e.__flipMode||0==t||1==t?gi:(Ft=e.__flipMode=t,ir(e,o,i),vi)},tr=function(e){var t=e.__startPagePN,n=e.__endPagePN,o=jt[t].$p,i=jt[n].$p;jt[t].__flip=jt[t].__animated=jt[n].__flip=jt[n].__animated=gi,i.css({transform:Or(0,0)+"rotate(0deg) "}),o.css({transform:Or(0,0)+"rotate(0deg) "})},nr=function(e){var t=Ct[e];t.__success?(pt=t.__endPN,xs("onBeforePageChange",t.__startPN),xs("onPageChange",pt)):zt=gi,xs(1,t.__startPagePN),xs(1,t.__endPagePN),tr(t),Ct.splice(e,1),xt=0!=Ct.length,xt&&e>0&&(It=Ct[e-1].__startPN,$t=Ct[e-1].__endPN),t.__success&&(xs(0===Ft||1===Ft?"onAutoFlippingSequenceEnded":"onManualFlippingSequenceEnded"),xs("onPageChangingComplete"))},or=function(e,t,n){var o=e.__endPagePN,i=jt[o].__renderWidth,r=jt[o].__renderHeight;return 2==e.__flipMode&&(U?(t*=r*e.__dir/n,n=r*e.__dir,-i/2>t&&(t=-i/2),t>i/2&&(t=i/2)):(n*=i*e.__dir/t,t=i*e.__dir,-r/2>n&&(n=-r/2),n>r/2&&(n=r/2))),e.__side=o%2?1:-1,e.__sx=U?-t:-i*e.__side,e.__sy=U?-r*e.__side:n,e.__cx=U?0:-i/2*e.__side,e.__cy=U?-r/2*e.__side:0,e.__ax=U?-t:-i*(0>t?1:-1),e.__ay=U?-r*(0>n?1:-1):n,e},ir=function(e,t,o,i){t=t||e.__ax,o=o||e.__ay;var r=e.__startPagePN,a=e.__endPagePN,s=jt[r].$p,c=jt[r].$m,u=jt[a].$p,l=jt[a].$m,d=jt[r].__renderWidth,p=jt[r].__renderHeight,f=d/2,h=p/2,g=St*(1==Bt?-1:1),v=e.__sx,m=e.__sy,b=e.__cx,_=e.__cy,y=U?o==e.__ex?n:o<e.__ex?-1:1:t==e.__ex?n:t<e.__ex?-1:1;if(e.__ex=U?o:t,2!=Bt)if(U){var w=yi(o*o+(f+t)*(f+t)),k=yi(o*o+(f-t)*(f-t)),T=yi(p*p+(f+v)*(f+v)),x=yi(p*p+(f-v)*(f-v));if((w>T||k>x)&&5!=e.__flipMode)if(v>t){var P=f-t,C=bi(P/k);t=f-mi(C)*x,o=_i(C)*x*(0>o?-1:1),t>v&&(m*o>0?(o=m,t=v):(o=-m,t=v))}else{var P=f+t,C=bi(P/w);t=mi(C)*T-f,o=_i(C)*T*(0>o?-1:1),v>t&&(m*o>0?(o=m,t=v):(o=-m,t=v))}(0>m&&20>o-m||m>0&&20>m-o)&&!i&&(0>m&&(o=-p+20),m>0&&(o=p-20))}else{var w=yi(t*t+(h+o)*(h+o)),k=yi(t*t+(h-o)*(h-o)),T=yi(d*d+(h+m)*(h+m)),x=yi(d*d+(h-m)*(h-m));if((w>T||k>x)&&5!=e.__flipMode)if(m>o){var P=h-o,C=bi(P/k);o=h-mi(C)*x,t=_i(C)*x*(0>t?-1:1),o>m&&(v*t>0?(o=m,t=v):(o=m,t=-v))}else{var P=o+h,C=bi(P/w);o=mi(C)*T-h,t=_i(C)*T*(0>t?-1:1),m>o&&(v*t>0?(o=m,t=v):(o=m,t=-v))}(0>v&&20>t-v||v>0&&20>v-t)&&!i&&(0>v&&(t=-d+20),v>0&&(t=d-20))}i?(e.__ax=t,e.__ay=o):(e.__ax+=(t-e.__ax)/5,e.__ay+=(o-e.__ay)/5,wi(t-e.__ax)<.5&&wi(o-e.__ay)<.5&&(e.__ax=t,e.__ay=o),t=e.__ax,o=e.__ay);var S=U?o/p*sn:t/d*sn;if(-sn>S&&(S=-sn),S>sn&&(S=sn),0>S&&Oi(-mi(S/an)*(U?p:d)),S>0&&Di(mi(S/an)*(U?p:d)),t!=e.__lx||o!=e.__ly){if(2==Bt){var g=St*(0>S?1:-1),B=sn*St,F=U?"rotateX":"rotateY",I=3e3;if(0>g)if(Tt){var $={transform:F+"("+(cn+B+S)*fn+"deg) "+Or(0,0)};s.css($);var M={transform:F+"("+sn+"deg) "+Or(I,I)};u.css(M)}else{var E=-(sn-wi(S))/5*St;s.css({transform:U?"scaleY("+mi(St*S/an)+") skewX("+E+"deg) "+Or(0,0):"scaleX("+mi(St*S/an)+") skewY("+E+"deg) "+Or(0,0)}),u.css({transform:Or(I,I)})}else if(Tt){var M={transform:F+"("+(cn-B+S)*fn+"deg) "+Or(0,0)};u.css(M);var $={transform:F+"("+sn+"deg) "+Or(I,I)};s.css($)}else{var E=(sn-wi(S))/5*St;u.css({transform:U?"scaleY("+mi(-St*S/an)+") skewX("+E+"deg) "+Or(0,0):"scaleX("+mi(-St*S/an)+") skewY("+E+"deg) "+Or(0,0)}),s.css({transform:Or(I,I)})}ce||(0>g?jt[r].$hts.css("opacity",(1-wi(mi(S/an))+1-wi(S/90))/2):jt[a].$hts.css("opacity",(1-wi(mi(S/an))+1-wi(S/90))/2)),e.__ax=t,e.__ay=o}else if(U){var N=v-t,A=m-o,L=v-b,H=m-_,R=yi(N*N+A*A),C=bi(N/R)||0,z=yi(L*L+H*H),P=bi(L/z);(0>A||0==A&&0>g)&&(C=fi-C),0>H&&(P=fi-P),P=C-(P-C);var D=_i(P)*z+o,O=mi(P)*z+t,q=(O-b)/2,W=(D-_)/2,X=b+q,Y=_+W,j=yi(q*q+W*W);0>W&&(j*=-1);var Z=C*an,V=6;u.css({transform:Or(0,((h+j)*g).toFixed(V))+"rotate("+Z+"deg) "}),l.css({transform:Or(-X.toFixed(V),Y.toFixed(V))+"rotate("+Z+"deg)"}),s.css({transform:Or(-(mi(-C)*g).toFixed(V),((-h-j+1*_i(-C))*g).toFixed(V))+"rotate("+-Z+"deg) "}),c.css({transform:Or((-X).toFixed(V),(Y-1*g).toFixed(V))+"rotate("+Z+"deg)"});var G=wi(_i(C)*h)-j*g,Q=mi(-C)*f+G,J=mi(C)*f+G,K=(Q+J)/2,ee=1;if(G=Q>J?Q:J,e.__sl=G,!ce){G/=p,K/=p;var te=.05>K?.05:K;.2>K&&(K=G),.2>K&&(ee=5*K),K>.9&&(ee=1-10*(K-.9));var ne=G;ne>.6&&(ne=ne>.8?.6-1*(ne-.8):.6+.1*mi((ne-.6)/.2*fi));var oe=.5+ee/2;jt[a].$fsA.css({transform:Or((-X).toFixed(5),Y.toFixed(5))+"rotate("+(Z+90)+"deg) scaleX("+6*te+")",opacity:oe.toFixed(5)}),jt[a].$fsB.css({transform:Or((-X).toFixed(5),Y.toFixed(5))+"rotate("+(Z+90)+"deg) scaleX("+3*G+")",opacity:ee.toFixed(5)}),jt[a].$fts.css({transform:"rotate("+(-Z+90)+"deg) "+Or((-j*g).toFixed(5),0)+"scaleX("+4*ne+")",opacity:(ee*pe).toFixed(5)})}e.__lx=t,e.__ly=o}else{var N=v-t,A=m-o,L=v-b,H=m-_,R=yi(N*N+A*A),C=bi(A/R)||0,z=yi(L*L+H*H),P=bi(H/z);(0>N||0==N&&0>g)&&(C=fi-C),0>L&&(P=fi-P),P=C-(P-C);var O=_i(P)*z+t,D=mi(P)*z+o,q=(O-b)/2,W=(D-_)/2,X=b+q,Y=_+W,j=yi(q*q+W*W);0>q&&(j*=-1);var Z=C*an,V=6;u.css({transform:Or(((f+j)*g).toFixed(V),0)+"rotate("+Z+"deg) "}),l.css({transform:Or(X.toFixed(V),Y.toFixed(V))+"rotate("+Z+"deg)"}),s.css({transform:Or(((-f-j+1*_i(-C))*g).toFixed(V),(mi(-C)*g).toFixed(V))+"rotate("+-Z+"deg) "}),c.css({transform:Or((X-1*g).toFixed(V),Y.toFixed(V))+"rotate("+Z+"deg)"});var G=wi(_i(C)*f)-j*g,Q=mi(-C)*h+G,J=mi(C)*h+G,K=(Q+J)/2,ee=1;if(G=Q>J?Q:J,e.__sl=G,!ce){G/=d,K/=d;var te=.05>K?.05:K;.2>K&&(K=G),.2>K&&(ee=5*K),K>.9&&(ee=1-10*(K-.9));var ne=G;ne>.6&&(ne=ne>.8?.6-1*(ne-.8):.6+.1*mi((ne-.6)/.2*fi));var oe=.5+ee/2;jt[a].$fsA.css({transform:Or(X.toFixed(5),Y.toFixed(5))+"rotate("+Z+"deg) scaleX("+6*te+")",opacity:oe.toFixed(5)}),jt[a].$fsB.css({transform:Or(X.toFixed(5),Y.toFixed(5))+"rotate("+Z+"deg) scaleX("+3*G+")",opacity:ee.toFixed(5)}),jt[a].$fts.css({transform:"rotate("+-Z+"deg) "+Or((-j*g).toFixed(5),0)+"scaleX("+4*ne+")",opacity:(ee*pe).toFixed(5)})}e.__lx=t,e.__ly=o}return y}},rr=function(e,t,n,o,i,r,a){e.__stx=e.__ax,e.__sty=e.__ay,e.__tx=t,e.__ty=n,e.__duration=o,e.__styleX=i,e.__styleY=r,e.__start=cr().getTime(),e.__r=a},ar=function(e){var t=cr().getTime()-e.__start,n=e.__duration,o=gi;t>=n&&(o=vi,t=n);var i=t/n,r=e.__tx-e.__stx,a=e.__ty-e.__sty,s=e.__stx+sr(e.__styleX,i,r,e.__r),c=e.__sty+sr(e.__styleY,i,a,e.__r);return{x:s,y:c,end:o}},sr=function(e,t,n,o){switch(e){case 0:return n*t;case 1:return mi(fi*t/2)*n;case 2:return(1-_i(fi*t/2))*n;case 3:return(1-_i(fi*t))/2*n;case 4:return mi(2*fi*t)*o;case 5:return mi(fi*t)*o;case 6:return _i(2*fi*t)*o;case 7:return _i(fi*t)*o}},cr=function(){return new Date},ur=gi,lr=function(){if(kn&&raf(lr),Ro.length>0&&gs(),xt){var e;bn=gn,yn=mn;for(var t=0;t<Ct.length;t++)switch(e=Ct[t],e.__flipMode){case 1:break;case 2:case 3:Dt=ir(e,Et*fn,Nt);break;case 0:case 4:var n=ar(e);ir(e,n.x,n.y,vi),n.end&&(nr(t),Wi(),en&&Rt&&(vr(Ct[Ct.length-1]),br()),kt||hr(),t--);break;case 5:var n=ar(e);ir(e,n.x,n.y,vi),n.end&&(nr(t),Wi(),t--)}xt&&(f&&!ke&&Ji(bn,yn),Oi(hn),Di(vn),qi())}J&&La(),da()},dr=function(t){if(!e(t.target).hasClass("pf-hotspot")&&(tn=!t||!t.type||"mousedown"!==t.type,"undefined"===e.type(Ot)&&(ur=gi,qt=void 0,Ot=+new Date,!Rt&&!At&&Fe))){wr(t),Jr=Hn;var n=xr(Et,Nt,Ht);if(n&&is())switch(br(),Wr(t),n){case"TL":case"BL":Ht||Lt?er(Ct[Ct.length-1],2,-1)&&(Ht=Lt=gi,Rt=vi):Ki(Et,Nt,2,-1,0)&&(Rt=vi);break;case"TR":case"BR":Ht||Lt?er(Ct[Ct.length-1],2,1)&&(Ht=Lt=gi,Rt=vi):Ki(Et,Nt,2,1,0)&&(Rt=vi)}else if(n=Cr(Et,Nt),n&&is())switch(br(),Wr(t),n){case"OL":Ki(Et,Nt,2,-1,1)&&(Rt=vi);break;case"IR":Ki(U?0>Et?-Wt:Wt:-ln,U?-ln:0>Nt?-Xt:Xt,2,-1,Ae?1:0)&&(Rt=vi);break;case"OR":Ki(Et,Nt,2,1,1)&&(Rt=vi);break;case"IL":Ki(U?0>Et?-Yt:Yt:ln,U?ln:0>Nt?-Ut:Ut,2,1,Ae?1:0)&&(Rt=vi)}else{if(En||!$n||!Fr(t))return vi;if("pf-hotspot"===t.target.className)return!0;ro=vi,ur=gi;var o=Tr(t,!1);if("undefined"!==e.type(o)){var i=kr(en,o.x,o.y,!0);isNaN(i.x)||isNaN(i.y)||ma(i.x,i.y)}}}},pr=function(t){if(!(t&&t.type&&"mousemove"===t.type&&tn))if(en||(ao=t.pageX,so=t.pageY),en||!$n||ro||!Fr(t)){if(ur=vi,!At&&Fe)if((Rt||Ht||ro||xn)&&Wr(t),wr(t),En||!ro){var o=xr(Et,Nt,Ht);if(Ht&&!en)o||vr(Ct[Ct.length-1]);else if(Rt);else if(!en&&!$n&&V&&!Ae&&o)switch(o){case"TL":case"BL":Ki(U?0>Et?-Wt:Wt:Et,U?Nt:0>Nt?-Xt:Xt,3,-1,0,n,Et,Nt)&&(Ht=vi);break;case"TR":case"BR":Ki(U?0>Et?-Yt:Yt:Et,U?Nt:0>Nt?-Ut:Ut,3,1,0,n,Et,Nt)&&(Ht=vi)}}else{var i=Tr(t,!1);if("undefined"!==e.type(i)){var r=kr(en,i.x,i.y,!0);isNaN(r.x)||isNaN(r.y)||ha(r.x,r.y)}}}else if(Wr(t),ro=vi,ur=gi,"undefined"!==e.type(t.pageX)){var r=kr(en,t.pageX,t.pageY,!0);ma(r.x,r.y)}},fr=function(t){if(!(t&&t.type&&"mouseup"===t.type&&tn)){if(qt=+new Date-Ot,Ot=void 0,t.target){var n=e(t.target),o=!1;if((n.hasClass("pf-thumbnail-button")||n.hasClass("pf-thumbnail-page"))&&(o=!0),"pf-thumbnail-container"!==n.attr("id")&&"pageflip-thumbnails"!==n.attr("id")||(o=!0),o)return!0}if(Fe)if(wr(t),Cn=null,Rt||Ht)Wr(t),xs("onManualEnded"),vr(Ct[Ct.length-1],!0),kt=gi,hr();else if(ro){if(Wr(t),en&&(ro=gi),!Fr(t))return vi;!en&&Sr(Et,Nt)&&Ce&&(ro=gi,"video-thumb"!==t.target.className&&"play-button"!==t.target.className&&"pf-hotspot"!==t.target.className&&(Ps.zoomOut(),Ps.hideThumbnails()))}else{if(!Fr(t))return vi;if(!en&&Sr(Et,Nt)&&Ce&&"video-thumb"!==t.target.className&&"play-button"!==t.target.className&&"pf-hotspot"!==t.target.className){var i=kr(en,t.pageX,t.pageY);ba(Et,Nt,i.x,i.y),Ps.zoomIn(),Ps.hideThumbnails()}}}},hr=function(){en||ot.trigger(rn.__onMove)},gr=function(e,t,n){Na();var o=gi,i=U?-.5:e,r=U?2*e:1;if(Ki(i*s,r*c/2,0,e,t,n,i*s*.97,r*c/2*.97)){var a=Ct[Ct.length-1];a.__success=vi;var u=1==a.__flipType?1:-1;U?rr(a,a.__sx,u*a.__sy,_e,5,2==a.__flipType?0:3,-s/8-(Pi()-.5)*s/16):rr(a,u*a.__sx,a.__sy,_e,2==a.__flipType?0:3,5,-c/8+(Pi()-.5)*c/16),o=vi}return o},vr=function(t,n){var o=t.__side*(1==t.__flipType?-1:1);if(er(t,4)){t.__success=Dt&&Rt?Dt==o:o*(U?Nt:Et)>0;var i=xr(Et,Nt,Ht||Rt),r=!1;if(.01>Jr&&(r=Cr(Et,Nt)),i||n){var a="undefined"!==e.type(Dt)&&Dt===o;(a||"undefined"!==e.type(qt)&&400>qt)&&(t.__success=vi)}Rt=!1,Ht=!1;var s=t.__sx*(U?1:(t.__success?-1:1)*t.__side*o),c=t.__sy*(U?(t.__success?-1:1)*t.__side*o:1),u=U?gt:ht,l=qr(s-t.__ax,c-t.__ay)/u,d=t.__sl/u,p=2;d>l&&(l=d,p=1),rr(t,s,c,_e*l,U?p:0,U?0:p),zt=!t.__success}},mr=function(){Wt=jt[pt].__renderWidth/pn||0,Xt=jt[pt].__renderHeight/dn||0,Yt=jt[pt+1].__renderWidth/pn||0,Ut=jt[pt+1].__renderHeight/dn||0},br=function(){Tn=[],Pn=[]},_r=0,yr=0,wr=function(t){var n,o,i=Tr(t,!1);"undefined"!==e.type(i)&&(n=i.x,o=i.y);var r=bt+Ln*Hn,a=(n-Ke.offset().left)/r-ht/2-vt,s=(o-Ke.offset().top)/r-gt/2-mt;isNaN(a)||(Et=a,Nt=s)},kr=function(t,n,o,i){var r,a={x:1,y:1},s=1,c=ht,u=gt;Ae&&(U?u/=2:c/=2);var l=0;Q&&(l=it.getHeight());var f=Hn;i&&(f=aa());var h=f/aa(),g=aa(),v=bt+Ln*g,m=bt+Ln*f,b=bt,_=c*b,y=(d-_)/2,w=y*m/b;w>d/2&&(w=d/2);var k=c*m+2*w,T=u*b,x=(p-T-l)/2,P=x*v/b;P>p/2&&(P=p/2);var C=x+h*(P-x),S=u*m+l+2*C,B=u*m+l+2*P;if(!en&&ro)if(t)a.x=a.y=1*s,Hn>0&&(a.x=a.y=1*s/Hn);else{var F;if(x>o){var I=o,$=I*P/x;F=$}else if(o>x+T){var M=o-T-x,E=M*P/x;F=P+u*m+E}else{var N=o-x,A=N*(u*m)/T;F=P+A}var L=F-o-((B-l)/2-p/2);L+=(S-l-p)/2,r={x:n*(k-d)/d,y:L}}return"undefined"===e.type(r)&&(r={x:parseInt(n-Je.offset().left,10)*a.x,y:parseInt(o-Je.offset().top,10)*a.y}),r},Tr=function(t,n){var o,i,r,a=t;if("undefined"===e.type(n)&&(n=!0),tn&&"touch"===nn){var s=t.originalEvent.changedTouches;a=void 0,"undefined"!==e.type(s[0])&&(n?Cn&&"undefined"===e.type(window.TouchEmulator)?a=Sn:(Cn=s[0].identifier,Sn=s[0],a=Sn):a=s[0])}return!tn||"touch"===nn&&"undefined"!==e.type(a)?"undefined"!==e.type(a.pageX)&&"undefined"!==e.type(a.pageY)&&(o=a.pageX,i=a.pageY):"pointer"===nn&&"undefined"!==e.type(a.clientX)&&"undefined"!==e.type(a.clientY)&&(o=a.clientX,i=a.clientY),"undefined"!==e.type(o)&&(r={x:o,y:i}),r},xr=function(e,t,n){var o="",i=ve*(n?1.2:1);return U?t>-Xt&&Ut>t&&(-Xt+i>t?e>-Wt&&-Wt+i>e?o="BL":Wt>e&&e>Wt-i&&(o="TL"):t>Ut-i&&(e>-Yt&&-Yt+i>e?o="BR":Yt>e&&e>Yt-i&&(o="TR"))):e>-Wt&&Yt>e&&(-Wt+i>e?t>-Xt&&-Xt+i>t?o="TL":Xt>t&&t>Xt-i&&(o="BL"):e>Yt-i&&(t>-Ut&&-Ut+i>t?o="TR":Ut>t&&t>Ut-i&&(o="BR"))),o},Pr=function(){var e=ri;return en&&(e=ai,Ae&&(e=si)),e},Cr=function(e,t){var n="",o=Pr();return en&&Hn>.01&&(o=ci),U?(me=o*Math.max(Xt,Ut),Ae&&(be=me),t>-Xt&&Ut>t&&(-Xt+me>t?wi(e)<Wt&&(n="OL"):t>Ut-me?wi(e)<Yt&&(n="OR"):wi(t)<be&&(n=0>t?"IL":"IR"))):(me=o*Math.max(Wt,Yt),Ae&&(be=me),e>-Wt&&Yt>e&&(-Wt+me>e?wi(t)<Xt&&(n="OL"):e>Yt-me?wi(t)<Ut&&(n="OR"):wi(e)<be&&(n=0>e?"IL":"IR"))),n},Sr=function(e,t){if(U){var n=Br(t,Wt,Yt);if(t>-Xt&&Ut>t&&e>-n&&n>e)return vi}else{var o=0;Ae||(o=Xt);var i=Br(e,o,Ut);if(e>-Wt&&Yt>e&&t>-i&&i>t)return vi}return gi},Br=function(e,t,n){return 0>e?t:n},Fr=function(t){var n=e(t.target);return!(n.is("input")||n.is("textarea")||n.is("button"))},Ir=function(t){var n,i,r=0==jt[t].__BackgroundFiles.length;Pr();i=r?"pf-page-container white-bg"+(jt[t].__outer?" pf-outer":"")+(o?" "+o:""):"pf-page-container pf-"+hi[t%2]+"-side"+(jt[t].__outer?" pf-outer":"")+(o?" "+o:"");var a="";if(ii&&jt[t].__PageNumber&&jt[t].__PageNumber>0){var s=e("<div></div>").addClass("pf-page-cursoroverlay");s.attr("id","page"+t+"cursoroverlay");var c=jt[t].__renderWidth,u=jt[t].__renderHeight;if(c&&u){var l=Pr(),d=!1,p=!1;Ae?1===jt[t].__PageNumber&&N-1>1?p=!0:jt[t].__PageNumber>1&&jt[t].__PageNumber===N-1?d=!0:jt[t].__PageNumber>1&&jt[t].__PageNumber<N-1&&(d=!0,p=!0):1===jt[t].__PageNumber&&N-1>1?p=!0:jt[t].__PageNumber>1&&jt[t].__PageNumber===N-1?(N-1)%2===0&&(d=!0):jt[t].__PageNumber>1&&jt[t].__PageNumber<N-1&&(N-1)%2===0&&(jt[t].__PageNumber%2===0?d=!0:p=!0);var f=c,h=0;d&&(f-=c*l,h+=c*l),p&&(f-=c*l),s.css({position:"absolute",height:"100%",width:f+"px",top:"0px",left:h+"px"}),a=e("<div></div>").append(s).html()}}return n=$r(i,"page"+t,[a,$r("pf-page-content","page"+t+"content")])},$r=function(t,n,o){var i="<div"+(n?' id="'+n+'"':"")+(t?' class="'+t+'"':"")+">";return o&&(e.isArray(o)||(o=[o]),e.each(o,function(t,n){"string"===e.type(n)&&(i+=n)})),i+"</div>"},Mr=function(t){return e("#page"+t)},Er=function(t){return e("#page"+t+"content")},Nr=function(t){return e("#page"+t+"emboss")},Ar=function(t){return e("#page"+t+"mask")},Lr=function(t){return e("#page"+t+"flipshadowcontainer")},Hr=function(t){return e("#page"+t+"flipshadowA")},Rr=function(t){return e("#page"+t+"flipshadowB")},zr=function(t){return e("#page"+t+"fliptopshadow")},Dr=function(t){return e("#page"+t+"hardtopshadow")},Or=function(e,t){return"translate("+e+"px,"+t+"px) "},qr=function(e,t,n){var o=yi(e*e+t*t);return n&&(o*=e>0?-1:1),o},Wr=function(e){return e.preventDefault()},Xr=function(i,r){return Qe!=n?Qe:(en=!0,(window.PointerEvent||window.navigator.pointerEnabled)&&window.navigator.msMaxTouchPoints?(rn={__onStart:"pointerdown",__onMove:"pointermove",__onEnd:"pointerup"},nn="pointer",on="pointerup"):(window.MSPointerEvent||window.navigator.msPointerEnabled)&&window.navigator.msMaxTouchPoints?(rn={__onStart:"MSPointerDown",__onMove:"MSPointerMove",__onEnd:"MSPointerUp"},nn="pointer",on="MSPointerUp"):"ontouchstart"in t||window.navigator.msMaxTouchPoints||"TouchEmulator"in window?(rn={__onStart:"touchstart",__onMove:"touchmove",__onEnd:"touchend"},nn="touch",on="touchend"):(en=!1,rn={__onStart:"mousedown",__onMove:"mousemove",__onEnd:"mouseup"},on="click"),o="undefined"===e.type(r)?"Flipbook":r,Qe=this,Tt="WebKitCSSMatrix"in t||"MozPerspective"in document.body.style,Bi(i),Ie&&vs(1),Fi(),Mi(),Ur(),this)},Yr=function(){window.goToLabel=function(e){Ps.gotoPageLabel("t"+e,!0),xs(12)},e(document).on("click","a.pf-hotspot",function(t){xs(12);var n=e(t.target).attr("href");if(!n||/^mailto:/.test(n))return!0;t.preventDefault();var o=window.open(n,"_blank");o&&o.focus()}),Xe&&(ut=new FlipbookTooltips({el:"a.pf-hotspot",color:He,background:Re,orientation:"top",text:ze,margin:7})),Kt=new FlipbookLinksFading({el:"a.pf-hotspot",background:Oe}),De&&Ts("onPageChange",function(){Kt.blink()})},Ur=function(){e(function(){if(Vo){var t=window.NavigationArrowsManager.getSize();t>m&&(y=t,w=t)}Jt=Qe.html();var n=e("#Template-pages");if(window.flipbookSettings){var o=e("<div/>");e.each(window.flipbookSettings.pages,function(t,n){var i=e("<div></div>",{"class":"page"}).attr({"data-background-file-desktop":Uo+"inc/pages/page"+t+".jpg","data-background-file-mobile":Uo+"inc/pages/page"+t+".jpg","data-thumbnail-image":Uo+"inc/pages/thumbnails/page"+t+".jpg","data-page-label":"t"+t});e.each(n.links,function(t,n){var o;o=n.is_internal?e('<a class="pf-hotspot" onclick="goToLabel('+n.link+')"></a>').css({top:n.top,left:n.left,width:n.width,height:n.height}):e("<a></a>",{"class":"pf-hotspot",href:n.link}).css({top:n.top,left:n.left,width:n.width,height:n.height}),i.append(o)}),e.each(n.videos,function(t,n){var o=e("<div></div>",{"class":"video-container"}),r=e("<div></div>",{"class":"video-player","data-id":n.id,"data-width":n.width,"data-height":n.height,"data-top":n.top,"data-left":n.left});"youtube"===n.host?r.addClass("youtube-player"):"vimeo"===n.host&&r.addClass("vimeo-player"),o.append(r),i.append(o)}),o.append(i)}),n=o}st=n,n.length>0?(Qe.html(n.html()),jr()):jr()})},jr=function(){var i=Qe.children();if(0==i.length)return[];Ni(i);var r=M=M>N?N:E>M?E:M;pt=Qa(r),pt-=pt%2,j&&(pt=ft-pt-1);var a=o?" "+o:"";Qe.html($r("pageflip-container"+a,"pf-stage",$r("pf-book-container"+a,"pf-book",$r("pf-book-offset"+a,"pf-bookoffs",$r("pf-book-content"+a,"pf-bookc",[ue?$r(o?o:n,"pf-dropshadow"):n,ii?$r(void 0,"pf-cursoroverlay"):n])))+$r(o?o:n,"pf-controls"))).css("visibility","visible"),Je=e("#pf-stage"),Ke=e("#pf-book"),tt=e("#pf-bookoffs"),et=e("#pf-bookc"),ue&&(nt=e("#pf-dropshadow"),ui=ui.add(nt)),ot=e(document),Je.css("background-color",je),"string"==typeof Ze&&Je.css({"background-image":'url("'+Ze+'")',"background-size":"cover"}),Je.css({position:"relative",margin:Ci,"-webkit-perspective-origin-x":"50%","-webkit-perspective-origin-y":"50%"}),T?Je.css({width:"100%",height:"100%"}):("undefined"==typeof d?Je.css({width:k?"100%":ht+y+w}):Je.css({width:d}),"undefined"==typeof p?Je.css({height:k?"100%":gt+b+_}):(Je.css({height:p}),Je.css({overflow:"hidden"}))),Gr(),Ke.css({top:0,left:0,"z-index":10}),Ae?Ke.css({position:"absolute"}):Ke.css({position:"relative"}),et.css({"transform-style":"preserve-3d",opacity:1}),tt.css({position:"absolute",top:0,left:0}),ui.length>0&&ui.css({position:"absolute",top:0,left:0,"z-index":1,"transform-origin":U?"50% 0%":"0% 50%",opacity:de}),J&&Pa(),Me&&e(Qe).css({"user-select":"none"}),lt=new window.FlipbookUrl({singlePageMode:Ae},Ps);var s=lt.getPageNumberFromUrl();return rt=new window.VideoManager(Ps),at=new window.AudioPlayer(Ve),ii&&(dt=new window.FlipbookCursorManager({cursorColor:Ge,incDirPath:Uo},Ps),Ts("onFlippingSequenceStarted",function(){Xi()}),Ts("onAutoFlippingSequenceEnded",function(){Xi()}),Ts("onManualEnded",function(){Xi()})),Ve.pageFlipping&&(Ts("onAutoFlippingSequenceStarted",function(){at.playSound("pageFlipping")}),Ts("onManualEnded",function(){at.playSound("pageFlipping")})),Q&&ya(rt),Ps.gotoPageNumber(s,!0),Yr(),Kr(),ta(),Vo&&(ct=new window.NavigationArrowsManager(Ps,{SinglePageMode:Ae},Go)),Xe&&Ts("onFlippingSequenceStarted",function(){ut.events.hide()}),Wi(),Kt&&De&&Kt.blink(),Ke.on(rn.__onStart,dr),ot.on(rn.__onMove,pr).bind(rn.__onEnd,fr),en&&(Ke.on("mousedown",dr),ot.on("mousemove",pr).bind("mouseup",fr)),e(t).bind("resize",Vr),(T||k)&&Vr(),qi(),Yi(),A&&Ps.startAutoFlip(gi),ot.keydown(function(e){switch(e.which){case 37:Ps.gotoPrevPage(),e.preventDefault();break;case 39:Ps.gotoNextPage(),e.preventDefault()}}),t.raf=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(e){t.setTimeout(e,ln/6)}}(),kn=vi,lr(),Qe},Zr=function(i){!Bn&&Qe&&(Bn=vi,et.css("opacity",0),it&&(it.css("opacity",0),it.unbind()),J&&Na(),t.setTimeout(function(){kn=gi},900),t.setTimeout(function(){xt=gi,ss(),o=n,Qe.empty(),Qe.html(Jt).attr("style",null),Qe=n,Si=85,ot.unbind(rn.__onMove,pr).unbind(rn.__onEnd,fr),ot.unbind("webkitfullscreenchange mozfullscreenchange msfullscreenchange fullscreenchange",fs),e(t).unbind("resize",Vr),Bn=gi,i&&i()},1e3),Ie&&ms())},Vr=function(){if(T&&e(Qe).css({width:t.innerWidth,height:"100%"}),T||k){var n=C;if(n&&Lo&&(n=gi,Je.css({height:"100%"})),d=window.innerWidth,p=window.innerHeight,Je.css({width:d+"px",height:p+"px"}),Qe.css({width:d+"px",height:p+"px"}),e("body").css({width:d+"px",height:p+"px"}),S){var o=t.innerHeight-B;p>o&&(p=o,n=gi,Je.css({height:o}))}var i=0;Q&&!n&&(i=it.getHeight());var r=d-y-w,a=n?gt:p-b-_;a-=i;var f=F?u:ht,h=F?l:gt,g=r/f,v=a/h;if(S){var m=v>g?g:v,M=gt*m+b+_;M>o&&(n=gi,a=p-b-_,v=a/h,Je.css({height:o}))}if(I){(U?a>=$:r>=$)?(u=s=Ti(r/dn),l=c=Ti(a/pn),bt=1):U?(l=c=$/2,bt=a/$,u=s=r/bt):(u=s=$/2,bt=r/$,l=c=a/bt),Ii(),Gr();for(var E=0;E<jt.length;E++)jt[E].__renderWidth=s,jt[E].__renderHeight=c,jt[E].__maskSize=jt[E].__isCover?wt:yt;Ei()}else bt=x?g>v?g:v:v>g?g:v,bt>1&&!P&&(bt=1);var N=window.screen.height,A=window.screen.width;Qo=!0,oi&&Xo&&("undefined"!==e.type(jo)&&(Qo=!(jo>=N)),"undefined"!==e.type(Zo)&&(Zo>=A?Qo=!1:"undefined"!==e.type(jo)&&(Qo=!0))),Yi(),Fn=Ti((ht*bt-ht)/2+(r-ht*bt)/2),n?(a=gt*(bt+Ln*Hn),Je.css({height:a+(b+_)}),In=ki((gt*(bt+Ln*Hn)-gt)/2)):In=ki((gt*bt-gt)/2-(gt*bt-a)/2),oa(r,a),xs("onStageResize"),Qr(),J&&Ha(vi)}else xs("onStageResize");sa(),ra(),Ae&&Ke.css({clip:"rect(-"+p/bt+"px "+d/bt+"px "+p/bt+"px 2px)"}).addClass("pf-book-container-singlepage"),Xi()},Gr=function(){if(Ke.css({width:ht}),Ae?Ke.css("height",gt):Ke.css("height",gt),tt.css({width:ht,height:gt}),ui.length>0){Pr();ui.css({width:ht,height:gt})}},Qr=function(){var e,t,n=bt+Ln*Hn;if(en)e=Fn+Un*Hn+_r+y,t=In+jn*Hn+yr+b;else{var o=ht,i=gt;Ae&&(U?i/=2:o/=2);var r=0;Q&&(r=it.getHeight());var a=Hn/aa(),s=aa(),c=bt+Ln*s,u=bt,l=i*u,d=(p-l-r)/2,f=d*c/u;f>p/2&&(f=p/2);var r=0;Q&&!C&&(r=it.getHeight());var h=C?gt:p-b-_;h-=r;gt*(bt+Ln*aa());e=Fn-Un*Hn+_r+y,t=(p-r)/2-i*n/2-jn*a+yr,Ke.css({"transform-origin":"50% top"})}Vo&&.01>Hn&&(ct.setPosition(n),qi()),Ke.css({transform:Or(e,t)+"scale("+n+","+n+")"})},Jr=0,Kr=function(){if(en){var t,n=Math.max(window.screen.availWidth,window.screen.availHeight);t=n>1e3?1/1.5:n>700?.4:1/3;var o=new Hammer(tt[0]),i=function(n){var o=aa();o>Hn&&("undefined"!==e.type(window.TouchEmulator)&&(n.velocity=.2),$n=!0,Hn+=Math.abs(n.velocity)*t,wi(o-Hn)<.01&&(Hn=o),xs(9,pt),na(),Qr())},r=function(n){Hn>0&&("undefined"!==e.type(window.TouchEmulator)&&(n.velocity=.2),Hn-=Math.abs(n.velocity)*t,.01>Hn&&(Hn=0,$n=!1),xs(10,pt),na(),Qr())};o.get("pinch").set({enable:!0,threshold:0}),o.get("tap").set({enable:!0,taps:2,posThreshold:100}),o.on("tap",function(e){"video-thumb"!==e.target.className&&"play-button"!==e.target.className&&(ea(e),$n?ra():ia()),e.preventDefault()}),o.on("pinchstart",function(e){ea(e),En=!0,An=e.scale,e.preventDefault()}),o.on("pinchmove",function(e){An<e.scale&&i(e),An>e.scale&&r(e),An=e.scale,e.preventDefault()}),o.on("pinchend",function(e){En=!1,Nn=!1})}},ea=function(e,t){var n=function(e){var t=bt+Ln*Hn,n=(e.center.x-Ke.offset().left)/t-ht/2-vt,o=(e.center.y-Ke.offset().top)/t-gt/2-mt;isNaN(n)||(Et=n,Nt=o)},o={x:parseInt(e.center.x-Je.offset().left),y:parseInt(e.center.y-Je.offset().top)};n(e),ba(Et,Nt,o.x,o.y,t)},ta=function(){Ln=0,Hn=0,Rn=0,zn=0,Un=0,jn=0,Zn=0,Vn=0,Gn=0,Qn=0,Jn=0,Kn=0,$n=gi,ro=gi,Mn=gi,Nn=gi},na=function(){var e=ht,t=gt,n=0;Q&&(n=it.getHeight());var o=e,i=t,r=Hn;if(en)o*=bt+Ln*r,i*=bt+Ln*r,Rn=Math.floor((o-d)/(2*r)),zn=Math.floor((i+n-p)/(2*r));else{var a=bt+Ln*aa();o*=a,i*=a,Rn=Ae?Math.floor((2*o-oo)/aa()):Math.floor((o-d)/(2*aa())),zn=Math.floor((i+n-p)/(2*aa()))}qn=-1*Math.abs(zn)-_,Wn=Math.abs(zn)+b,en&&Rn<-1*Math.abs(b)||!en&&0>Rn?(Rn=0,Dn=0,On=0):(Dn=-1*Rn-y,On=Rn+w)},oa=function(e,t){var n=ht,o=gt,i=0;if(Ae&&(U?o/=2:n/=2),Q&&(i=it.getHeight()),eo=n,to=o,no=n,Ae||(no=Math.floor(no/2)),Ln=1>bt?1-bt:0,oo=e,io=t,na(),Xn=n/oo,Yn=o/io,1>Xn&&(Xn=1),1>Yn&&(Yn=1),0==Ln)ta();else if($n){var r=va(Zn,Vn);Un=Zn=r.x,jn=Vn=r.y}pa(),Ts("onFlippingSequenceStarted",function(){ra(),pa(),Xe&&ut.events.hide()})},ia=function(){!$n&&1>bt&&(Vo&&ct.toggle(!1),$n=vi,en&&(Mn=vi),xs(9,pt))},ra=function(){$n&&1>bt&&($n=gi,en||(Un=Zn,jn=Vn),en&&(Mn=vi),ur=!1,ro=!1,xs(10,pt))},aa=function(){var e=1;return e},sa=function(){for(var t,n=v+1,o=aa(),i=.01,r=1.0001;10>r;r+=1e-4){var a=i*(1-Math.pow(r,n))/(1-r);if(a>o){t=r;break}}"undefined"===e.type(t),co=t},ca=0,ua=!1,la=!1,da=function(){var n,o=aa(),i="undefined"!==e.type(v);if(n=i?co:o/7,!en||Mn)if($n){if(wi(o-Hn)>.01||ua){if(i){la&&(ca=0,la=!1),ua=!0,ca+=1;var r=.01*Math.pow(co,v-ca+1);Hn+=r}else Hn+=(o-Hn)*n;Xi(),wi(o-Hn)<=.01&&(Hn=o,ua=!1,ca=0,Mn=gi),Qr(),C&&e(t).trigger("resize")}}else if(0!=Hn||la){if(i){la=!0,ua&&(ca=0,ua=!1);var r=.01*Math.pow(co,v-ca+1);Hn-=r,ca+=1}else Hn-=Hn*n;Xi(),.01>=Hn&&(Vo&&ct.toggle(!0),la=!1,ca=0,Hn=0,Mn=gi),Qr(),C&&e(t).trigger("resize")}fa()},pa=function(){it&&(e("#b-zoomout").css("display",$n?"":"none"),e("#b-zoomin").css("display",$n?"none":""),Ta(e("#b-zoomin"),Ln>0&&Pe))},fa=function(){if(!en&&ro){if(Zn===Un&&Vn===jn)return;Un+=(Zn-Un)/4,jn+=(Vn-jn)/4,Qr()}else if(Math.abs(Zn-Un)>.001||Math.abs(Vn-jn)>.001){na();var e=va(Zn,Vn);Zn=e.x,Vn=e.y,Un=Zn,jn=Vn,Qr()}},ha=function(e,t){e+=Gn,t+=Qn,Zn=e,Vn=t;var n=Zn-Jn,o=Vn-Kn;Hn>0&&(n/=Hn,en?o/=Hn:o*=Hn/aa()),Zn=Jn+n,Vn=Kn+o;var i=va(Zn,Vn);Zn=i.x,Vn=i.y},va=function(t,n){return en?(Dn>t&&("undefined"===e.type(Jn)||Jn>=Dn-2)?t=Dn:t>On&&("undefined"===e.type(Jn)||On+2>=Jn)&&(t=On),qn>n&&("undefined"===e.type(Kn)||Kn>=qn-2)?n=qn:n>Wn&&("undefined"===e.type(Kn)||Wn+2>=Kn)&&(n=Wn)):n>Math.abs(Qn)&&(n=Math.abs(Qn)),{x:t,y:n}},ma=function(e,t){var n=ht,o=gt;Ae&&(U?o/=2:n/=2);var i=0;Q&&(i=it.getHeight());var r=aa(),a=bt+Ln*r,s=bt,c=n*s,u=(d-c)/2,l=u*a/s;l>d/2&&(l=d/2);var f=o*s,h=(p-f-i)/2,g=h*a/s;g>p/2&&(g=p/2);var v=o*a+i+2*g;Gn=Un-e,Jn=Un,Kn=jn,Qn=en?jn-t:-1*((v-i)/2-(p-i)/2)},ba=function(e,t,n,o,i){var r=ht,a=gt;Ae&&(U?a/=2:r/=2);var s=0;Q&&(s=it.getHeight());var c=Hn;c=aa();var u=bt+Ln*c,l=bt,f=r*l,h=(d-f)/2,g=h*u/l;g>d/2&&(g=d/2);var v=a*l,m=(p-v-s)/2,_=m*u/l;_>p/2&&(_=p/2);var w=a*u+s+2*_,k=n-Fn-ht/2-e-y-vt,T=o-In-gt/2-t-b-mt;if(!en){var x;if(k=-k,m>o){var P=o,C=P*_/m;x=C}else if(o>m+v){var S=o-v-m,B=S*_/m;x=_+a*u+B}else{var F=o-m,I=F*(a*u)/v;x=_+I}T=x-o-((w-s)/2-(p-s)/2)}var $;$=i||!en?{x:k,y:T}:va(k,T),Un=$.x,Zn=$.x,jn=$.y,Vn=$.y},_a=function(e){$e&&(Ro&&0!==Ro.length||Ct&&0!==Ct.length||lt.updateUrl(e))},ya=function(t){if(window.ControlBar){var n=e("#pf-controls");it=new window.ControlBar(n,{zIndex:G||forceTop?12:2,colors:Le,touchControl:en,touchType:nn,pagerText:Te,minPageLimit:E,maxPageLimit:N,hashControl:$e,navigationLoop:Y,fullScreenEnabled:H,searchButtonEnabled:R,printButtonEnabled:z,navigationButtonsEnabled:D,downloadButtonEnabled:O,thumbnailsButtonEnabled:q,controlbarTooltipEnabled:We,controlbarTooltipBackground:Ue,controlbarTooltipColor:Ye,navbarMinHeight:Jo,navbarMinWidth:Ko,useNavBarMinSizes:ei,navBarTablet:ni,navBarMobile:ti},Ps,t),Ts("onPageChangingComplete",function(){it.updatePage()}),lt.getPageNumberFromUrl()<2&&it.updatePage(),Ts("onStageResize",it.adjustButtonsToScreenSize)}return Lo=!1,H&&(Ho=document.getElementById("pf-stage"),H=Ho.requestFullscreen||Ho.mozRequestFullScreen||Ho.webkitRequestFullScreen||Ho.msRequestFullscreen?vi:gi),H&&ot.bind("webkitfullscreenchange mozfullscreenchange fullscreenchange msfullscreenchange",fs),it},wa=function(e){var t=ka(e),n="_new"+Math.round(99999*Math.random()).toString(),o=window.open("about:blank",n);o.document.open(),o.document.write(t),o.document.close()},ka=function(t){var n="<html>\n	<head>\n		<style>\n			@media print { img{display:inline} }\n  			@media screen { img{display:none} }\n		</style>\n		<script>\n			function run(){setTimeout('printImg()', 10);}\n			function printImg(){\n				window.print(); window.close();\n			}\n		</script>\n	</head>\n	<body onload='run()'>\n",o=[];
return t&&"left"!==t||"undefined"===e.type(jt[pt])||e.isArray(jt[pt].__BackgroundFiles)&&jt[pt].__BackgroundFiles.length>0&&o.push("<img src="+jt[pt].__BackgroundFiles[0].url+' style="width:100%; height:auto;" />'),t&&"right"!==t||"undefined"===e.type(jt[pt+1])||e.isArray(jt[pt+1].__BackgroundFiles)&&jt[pt+1].__BackgroundFiles.length>0&&o.push("<img src="+jt[pt+1].__BackgroundFiles[0].url+' style="width:100%; height:auto;"/>'),n+o.join("<br />")+"</body>\n</html>"},Ta=function(e,t){t==n&&(t=vi),t?e.removeClass("pf-disabled"):xa(e)},xa=function(e){e.addClass("pf-disabled")},Pa=function(){var t="pageflip-thumbnails",i="pf-thumbnail-container";Ke.after($r(ne?"pf-hidden":n,t,$r(n,i))),go=e("#"+t),o&&go.addClass(o),vo=e("#"+i),vo.css("width",ft*oe*1.5),lo=[],po=[],fo=[],ho=[],xo=0,wo=0,ko=0;for(var r,a,t,s="pf-thumbnail",c="-",u="page",l="spread",d="button",p=s+c+u,f=s+c+l,h=s+c+d,g="#"+s,v=0;ft>=v;v+=2)r=jt[v].__ThumbnailImageUrl?v:-1,a=jt[v+1].__ThumbnailImageUrl?v+1:-1,0>r&&a>=0&&(r=a,a=-1),r>=0&&a>=0?(vo.append($r(f,n,$r(h,s+r+d)+$r(h,s+a+d))),Sa(r),t=e(g+r+d).position().left,lo.push(t+oe),po.push(v),fo.push(2*oe),Sa(a),K&&ho.push([r,a])):r>=0&&(vo.append($r(p,n,$r(h,s+r+d))),Sa(r),t=e(g+r+d).position().left,lo.push(t+oe/2),po.push(v),fo.push(oe),K&&ho.push([r]));lo.length?(xo=t+oe*(jt[ft].__outer?1:2)+w,vo.css("width",xo+20),Ca(),Po=gi,Bo=0,vo.bind(rn.__onStart,Fa),vo.bind(rn.__onEnd,$a),vo.bind(rn.__onMove,Ia),en&&(vo.bind("mousedown",Fa),vo.bind("mouseup",$a),vo.bind("mousemove",Ia)),vo.css("height",ie+16),en||vo.bind("mouseleave",Ma),bo=ne,Ea(),Ts("onZoomIn",Na),Ts("onZoomOut",Na),Ts("onPageChange",Na)):(J=gi,go.remove()),ne&&vo.css("display","none")},Ca=function(e){if(J){var t=1;(ee||e)&&(t=12),go.css("z-index",t)}},Sa=function(t){var n={width:oe,height:ie,"background-size":+oe+"px "+ie+"px",cursor:"pointer"};K||(n.background="url("+jt[t].__ThumbnailImageUrl+")");var o=e("#pf-thumbnail"+t+"button");o.attr("data-page",t).attr("title","Page "+jt[t].__PageNumber),o.css(n);var i=new Hammer(o[0]);i.on("tap",function(t){if(!bo&&!xt){var n=e("#"+t.target.id).data().page;$o=vi,Ps.gotoPage(n,vi),Na(),Ba(t.srcEvent)}})},Ba=function(e){Rt||Ht||(Wr(e),e.stopPropagation())},Fa=function(e){tn=!e||!e.type||"mousedown"!==e.type,za(Oa(e)),Ba(e)},Ia=function(e){e&&e.type&&"mousemove"===e.type&&tn||(!bo||!te||Rt||Ht||ro?Ea():Aa(),Co&&(Po=vi,Io=vi,wo=qa(So+Oa(e))),Ba(e))},$a=function(e){e&&e.type&&"mouseup"===e.type&&tn||Da()},Ma=function(e){Da(),!bo&&te&&Na()},Ea=function(e){if(!te)return gi;var t=cr();return e!=n?t-mo>e:void(mo=t)},Na=function(){bo=!0,go.addClass("pf-hidden"),setTimeout(function(){bo&&(Ca(!1),vo.css("display","none"))},300)},Aa=function(){Ea(),bo=!1,vo.css("display","block"),go.removeClass("pf-hidden"),Ca(vi)},La=function(){bo||(Ea(te)&&Na(),ko!=wo&&Ra())},Ha=function(e){if($o)return void($o=gi);var t,o=ki(d/2),i=lo.length-1,r=po.lastIndexOf(pt);if(re?(yo=o-lo[0],_o=o-lo[i]):(yo=o-lo[0]-o+fo[0]/2,_o=o-lo[i]+o-fo[i]/2,_o>yo&&(yo=_o=ki(yo+_o/2))),0>r){if(!e)return;t=0}else t=lo[r];wo=qa(o-t),(!ko==n||bo||e)&&(ko=wo+.5)},Ra=function(){if(ko!=wo&&(Po?(Bo=wo-Fo,Fo=wo):0!=Bo&&(Bo*=.9,wi(Bo)<1?Bo=0:wo=qa(wo+Bo)),ko+=(wo-ko)/5,wi(wo-ko)<1&&(ko=wo,Bo=0),vo.css("transform",Or(ko,0)),K&&!(wi(ko-To)<32))){To=ko;for(var t=-oe-32,n=d+oe+32,o=ho.length,i=0;o>i&&lo[i]+ko<t;)i++;for(;o>i&&lo[i]+ko<n;)ho[i]&&(e.each(ho[i],function(t){var n=ho[i][t],o=e("#pf-thumbnail"+n+"button");Zi(o,n).done(function(){o.css({"background-image":'url("'+jt[n].__ThumbnailImageUrl+'")',"background-size":"auto"})})}),ho[i]=null),i++}},za=function(e){Co=vi,Po=gi,Io=gi,Fo=wo,So=wo-e},Da=function(){Io=Po,Po=Co=gi},Oa=function(t){var n=Tr(t,!1);return"undefined"!==e.type(n)?n.x:void 0},qa=function(e){return _o>e?e=_o:e>yo&&(e=yo),e},Wa=function(e,t,n){Na();var o=gi;if(E>e||e>N)return xs("onPageChangingComplete"),o;if(!xt&&0==Ro.length)if(e-=e%2,e!=pt)if(o=vi,n)pt=e,xs("onPageChangingComplete"),Wi();else{var i=e-pt;if(t)(e==ft-1&&0!=pt||0==e&&pt!=ft-1)&&(f||_t)&&wi(i)>2?0>i?(hs(0,i+2),hs(200,-2)):(hs(0,i-2),hs(200,2)):(pt==ft-1&&0!=e||0==pt&&e!=ft-1)&&(f||_t)&&wi(i)>2?0>i?(hs(0,-2),hs(200,i+2)):(hs(0,2),hs(200,i-2)):hs(0,i);else{var r,a=999;0>i?(r=-1,i*=-1):r=1,i/=2,a>i&&(a=i);for(var s=0,c=0,u=i/a,l=0;a>l;l++)s=xi(u*(l+1)),hs(l?_e/4:0,2*(s-c)*r),c=s}}else xs("onPageChangingComplete");return o},Xa=function(e,t){Wa(Qa(e),t)},Ya=function(e,t){Wa(Ja(e),t)},Ua=function(e,t){Wa(Ka(e),t)},ja=function(e){is()&&Wa(j&&!e?N:E,vi)},Za=function(e){return is()?Y&&(!j||e?E+1>pt:pt>N-2)?Ga(e):gr(j&&!e?1:-1,Ae&&!j?1:0,2):void 0},Va=function(e){return is()?Y&&(j&&!e?E+1>pt:pt>N-2)?ja(e):gr(j&&!e?-1:1,Ae&&j?1:0,2):void 0},Ga=function(e){is()&&Wa(j&&!e?E:N,vi)},Qa=function(e){return e>0?Mo.lastIndexOf(parseInt(e)):-1},Ja=function(e){return Eo.lastIndexOf(e.toLowerCase())},Ka=function(e){return No.lastIndexOf(e)},es=function(){Mo=[],Eo=[],No=[];for(var e=0;ft>=e;e++)Mo[e]=jt[e].__PageNumber,Eo[e]=jt[e].__PageName?jt[e].__PageName.toLowerCase():n,No[e]=jt[e].__PageLabel},ts=function(e,t){return t?void(jt[e].__Data=t):jt[e].__Data},ns=function(){return!(Ht||Rt||xn)},os=function(e,t){e==n&&(e=0),t==n&&(t=ft),E=j?ft-t:e,N=j?ft-e:t,0>E&&(E=0),N>ft&&(N=ft),E-=E%2,N+=1-N%2},is=function(){return!($n&&!Se)},rs=function(){var e=jt[pt].__AutoFlipInterval||jt[pt+1].__AutoFlipInterval;e=e==n?W:e,Ao=t.setTimeout(cs,e)},as=function(e){e==n&&(e=vi),At||(At=vi,e?cs():rs())},ss=function(){At&&(At=gi,t.clearTimeout(Ao))},cs=function(){if(!Va(gi)){if(!X)return void Ps.stopAutoFlip();ja()}rs()},us=function(){it&&(e("#b-pause").css("display",At?"":"none"),e("#b-play").css("display",At?"none":""))},ls=function(){Ho.requestFullscreen?Ho.requestFullscreen():Ho.mozRequestFullScreen?Ho.mozRequestFullScreen():Ho.webkitRequestFullScreen?Ho.webkitRequestFullScreen():Ho.msRequestFullscreen&&Ho.msRequestFullscreen(),Lo=vi},ds=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),Lo=gi},ps=function(){H&&(e("#b-fullscreen").css("display",Lo?"none":""),e("#b-fullscreenoff").css("display",Lo?"":"none"))},fs=function(e){ps(),Vr()},hs=function(e,t){var o={__delay:e,__pnAdd:t,__startTime:n};Ro.push(o)},gs=function(){var e=cr(),t=Ro[0];t.__startTime||(t.__startTime=cr()),t.__delay<e-t.__startTime&&gr(t.__pnAdd<0?-1:1,0,wi(t.__pnAdd))&&Ro.splice(0,1)},vs=function(e){Oo=e,Wo=o?o:"Untitled",qo="Pageflip5 - "+Wo,Do=[],zo=cr(),ys()},ms=function(){var e=cr()-zo;switch(e=Math.floor(e/1e3),Oo){case 0:break;case 1:ga("send","event","Flipbooks","Book time",Wo,e);break;case 2:}},bs=function(e){Do[e]=cr()},_s=function(e){var t=cr()-Do[e];switch(t=Math.floor(t/1e3),Oo){case 0:break;case 1:ga("send","event","Flipbooks","Page "+e,Wo,t);break;case 2:}},ys=function(){switch(Oo){case 0:break;case 1:ga("send","event","Flipbooks","Book Opened",Wo,0);break;case 2:}},ws=function(e){switch(Oo){case 0:break;case 1:ga("send","event","Flipbooks","Page "+e+" View",Wo,0);break;case 2:}},ks=["onFlip","onFlipEnd","onTop","onTopEnd","onLoad","onUnload","onRemove","onHide","onShow","onZoomIn","onZoomOut","onPageChange","onLinkClicked","onFlippingSequenceStarted","onAutoFlippingSequenceStarted","onAutoFlippingSequenceEnded","onManualFlippingSequenceEnded","onManualEnded","onPageChangingComplete","onStageResize"],Ts=function(t,n){if(e.isArray(t)){var o=t;e.each(o,function(e,t){Ts(t,n)})}else{if("function"==typeof li[t]){var i=li[t];li[t]=[i]}e.isArray(li[t])?li[t].push(n):li[t]=[n]}},xs=function(t,n){var o;if("number"==typeof t&&"undefined"!=typeof ks[t]?o=ks[t]:"string"==typeof t&&ks.indexOf(t)>-1&&(o=t),"undefined"!==o){if(li){var i=li[o];"function"==typeof i?i(n):e.isArray(i)&&e.each(i,function(e,t){"function"==typeof t&&t(n)})}Oo&&("onTop"===o?(ws(n),bs(n)):"onTopEnd"===o&&_s(n))}},Ps={gotoPage:function(e,t){return ns()?(ss(),Wa(e,t)):void 0},gotoPageNumber:function(e,t){return ns()?(ss(),Xa(e,t)):void 0},gotoPageName:function(e,t){return ns()?(ss(),Ya(e,t)):void 0},gotoPageLabel:function(e,t){return ns()?(ss(),Ua(e,t)):void 0},gotoFirstPage:function(e){ns()&&(ss(),ja(e))},gotoPrevPage:function(e){ns()&&(ss(),Za(e))},gotoNextPage:function(e){ns()&&(ss(),Va(e))},gotoLastPage:function(e){ns()&&(ss(),Ga(e))},startAutoFlip:function(e){ns()&&L&&(as(e),us())},stopAutoFlip:function(){At&&(ss(),us())},toggleAutoFlip:function(){At?Ps.stopAutoFlip():Ps.startAutoFlip()},closePageflip:function(e){Zr(e)},getID:function(){return o},getPN:function(){return pt},getPageNumber:function(e){return jt[e?e:pt].__PageNumber},getPageName:function(e){return jt[e?e:pt].__PageName},getPageLabel:function(e){return jt[e?e:pt].__PageLabel},showThumbnails:function(){J&&(bo?Aa():Na())},hideThumbnails:function(){J&&Na()},zoomIn:function(){Pe&&(ia(),pa())},zoomOut:function(){ra(),pa()},toggleZoom:function(){$n?Ps.zoomOut():Ps.zoomIn()},mouseControl:function(e){Fe=e},pageLimit:function(e,t){os(e,t)},data:function(e,t){return ts(e,t)},enterFullScreen:function(){return ls()},exitFullScreen:function(){return ds()},addPage:function(t,n,o){Ai(e(t),n,o)},reloadPage:function(e){},removePage:function(e,t,n){Li(e,t,n)},printLeft:wa.bind(void 0,"left"),printRight:wa.bind(void 0,"right"),printBoth:wa,download:function(){if(i)if(window.ActiveXObject){if(window.ActiveXObject&&document.execCommand){var t=window.open(i,"_blank");t.document.close(),t.document.execCommand("SaveAs",!0,i),t.close()}}else try{var n=document.createElement("a");n.href=i,n.target="_blank",n.download="flipbook";var o=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});n.dispatchEvent(o),(window.URL||window.webkitURL).revokeObjectURL(n.href)}catch(r){if("download"in document.createElement("a")){var a=e('<a download="flipbook">s</a>');a.attr("href",i),a.attr("target","_blank"),a.css("display","none"),e("body").append(a),a.click(function(){e(this).remove()}),a[0].click()}else window.open(i)}},getIsFullScreen:function(){return Lo},getIsThumbnailMode:function(){return J&&!bo},getCurrentPageNumber:function(){return pt},getFirstPageNumber:function(){return E},getLastPageNumber:function(){return N},getPageInfoList:function(){return jt},updateHash:_a,addEventHandler:Ts,getInstance:function(){return Qe},getPagesTemplate:function(){return st},getIsTouchDevice:function(){return"undefined"!==e.type(nn)},getIsMobileDevice:function(){return Xo||Yo},getIsPhone:function(){return Xo},getIsTablet:function(){return Yo},getBookWidth:function(){return ht},getBookHeight:function(){return gt},getBookScale:function(){return bt},getStageWidth:function(){return d},getStageHeight:function(){return p},getMargin:function(){return y},getControlbarHeight:function(){var e=0;return Q&&(e=it.getHeight()),e},getEndPN:function(){return $t},getClickEventName:function(){return on},getPfEvent:function(){return rn}},Cs=function(e,t){return e==n?Ps:Qe?Ps[e](t):[]};e.extend(e.fn,{pageflipInit:Xr,pageflip:Cs})}($,window)}catch(e){!function(){window.initFlipbook=function(){},$(function(){var e,t,n,o,i,r,a,s,c,u,l,d,p,f,h,g,v,m,b,_,y=$(document),w=$(window),k=$("#pageflip"),T="",x=45,P=32,C=!0,S=[],B=[1,void 0],F=0,I=function(){var h=$("#Template-legacy").html();E(),t=$(h),e=t.find(".FBLcontrolbar"),a=t.find(".FBLbook"),n=t.find(".FBLcontrolbar-button--toBeginning"),o=t.find(".FBLcontrolbar-button--back"),i=t.find(".FBLcontrolbar-button--forward"),r=t.find(".FBLcontrolbar-button--toEnd"),f=t.find(".FBLcontrolbar-input"),s=t.find(".FBLbook-pageContainer"),c=s.find(".FBLbook-left"),u=s.find(".FBLbook-right"),l=c.find(".FBLbook-left-content"),d=u.find(".FBLbook-right-content"),p=s.find(".FBLcontrolbar-inputContainer"),k.append(t),N(),z(),w.on("resize",M),M(),window.goToLabel=function(e){A(e)},"string"===$.type(window.flipbookSettings.IncDirPath)&&(T=window.flipbookSettings.IncDirPath)},M=function(){var e=y.width(),t=y.height();if(e!==h||t!==g){var n="undefined"===$.type(h);h=e,g=t;var o=g-x;a.css("height",o+"px");var i=h;b=o-2*P,_=i-2*P,s.css({width:q(_),height:q(b),"margin-top":q(P),"margin-left":q(P)}),n?A(1):H()}},E=function(){F=0,"undefined"!==$.type(window.flipbookSettings)&&"undefined"!==$.type(window.flipbookSettings.pages)&&$.each(window.flipbookSettings.pages,function(e,t){var n=T+"inc/pages/page"+e+".jpg",o=[];$.isArray(t.links)&&(o=t.links),F+=1,S.push({pageNumber:F,backgroundFile:n,linkList:o})}),v=!0,m=F%2!==1},N=function(){n.on("click",function(){A(1)}),o.on("click",function(){A(B[0]-1)}),i.on("click",function(){A(C?B[0]+1:B[0]+2)}),r.on("click",function(){A(F)})},A=function(e){var t=function(e,t){"back"===e?t?(n.removeClass("FBLcontrolbar-button--toBeginningInAct"),o.removeClass("FBLcontrolbar-button--backInAct"),n.addClass("FBLcontrolbar-button--toBeginning"),o.addClass("FBLcontrolbar-button--back")):(n.addClass("FBLcontrolbar-button--toBeginningInAct"),o.addClass("FBLcontrolbar-button--backInAct"),n.removeClass("FBLcontrolbar-button--toBeginning"),o.removeClass("FBLcontrolbar-button--back")):"forward"===e&&(t?(i.addClass("FBLcontrolbar-button--forward"),r.addClass("FBLcontrolbar-button--toEnd"),i.removeClass("FBLcontrolbar-button--forwardInAct"),r.removeClass("FBLcontrolbar-button--toEndInAct")):(i.removeClass("FBLcontrolbar-button--forward"),r.removeClass("FBLcontrolbar-button--toEnd"),i.addClass("FBLcontrolbar-button--forwardInAct"),r.addClass("FBLcontrolbar-button--toEndInAct")))},a=!1;return 2>e?(B=[1,void 0],t("back",!1),t("forward",!0),H(),a=!0):F>e||!m&&e===F?(B=C?[e,void 0]:e%2===1?[e-1,e]:[e,e+1],t("back",!0),t("forward",!0),H(),a=!0):m&&e===F&&(B=[e,void 0],t("back",!0),t("forward",!1),H(),a=!0),a&&D(),a},L=function(e){var t,n=S[e-1];if("undefined"===$.type(n.$loadedImg)){var o;"undefined"===$.type(n.promise)?(o=$.Deferred(),n.promise=o):o=n.promise,t=$("<img />",{src:n.backgroundFile}).css("display","none").appendTo($("body")).on("click",function(){var e=window.open(n.backgroundFile,"_blank");e&&e.focus()}).on("load",function(){n.$loadedImg=t,n.$img=void 0,o.resolve()}).on("error",function(){t.remove(),setTimeout(function(){L(e)},500)}),n.$img=t}return n},H=function(){var e,t,n,o,i,r,a,s,p=function(e,t,n,o,i,r,a){t.css({top:r,left:a}),t.append(e.$loadedImg),$.each(e.linkList,function(e,t){if("undefined"!==$.type(t.link)){var r,a=window.parseInt(t.top,10),s=window.parseInt(t.left,10),c=window.parseInt(t.width,10),u=window.parseInt(t.height,10);window.isNaN(a)||window.isNaN(s)||window.isNaN(c)||window.isNaN(u)||(a=Math.round(a*i),s=Math.round(s*o),c=Math.round(c*o),u=Math.round(u*i),r=t.is_internal?$('<a class="pf-hotspot" onclick="goToLabel('+t.link+')"></a>').css({top:q(a),left:q(s),width:q(c),height:q(u)}):$("<a></a>",{"class":"pf-hotspot",href:t.link}).css({top:q(a),left:q(s),width:q(c),height:q(u)}),r.on("click",function(e){var t=$(e.target).attr("href");if(!t||/^mailto:/.test(t))return!0;e.preventDefault();var n=window.open(t,"_blank");n&&n.focus()}),n.append(r))}}),e.$loadedImg.show()},f=0;c.add(u).children("img").detach(),l.add(d).html(""),B[0]&&B[0]<=F&&(e=L(B[0]),a=e.promise,f+=1),B[1]&&B[1]<=F&&(t=L(B[1]),s=t.promise,f+=1);var h,g;1===f&&a.done(function(){B[0]===e.pageNumber&&(i=R(e.$loadedImg,c),h=Math.floor(_/2-i.width/2),g=Math.floor((b-i.height)/2),p(e,c,l,i.widthMultiplier,i.heightMultiplier,g,h))}),2===f&&$.when(a,s).done(function(){if(B[0]===e.pageNumber&&B[1]===t.pageNumber){n=e.$loadedImg,o=t.$loadedImg,i=R(n,c),r=R(o,u);var a=i.width+r.width;h=Math.floor(_/2-a/2),g=Math.floor((b-i.height)/2);var s=h+i.width;p(e,c,l,i.widthMultiplier,i.heightMultiplier,g,h),p(t,u,d,r.widthMultiplier,r.heightMultiplier,g,s)}})},R=function(e,t){var n=e.height(),o=e.width(),i=Math.floor(o*(b/n)),r=Math.floor(n*(b/n)),a=_;return C||(a=Math.floor(_/2)),i>a&&(r=Math.floor(r*(a/i)),i=Math.floor(a)),e.add(t).css({width:q(i),height:q(r)}),{height:r,width:i,heightMultiplier:r/n,widthMultiplier:i/o}},z=function(){var e,t=function(){var t=f.val(),n=parseInt(t,10),o=!1;isNaN(n)||(o=A(n)),o||f.val(e),e=void 0,O()};f.on("click",function(){f.focus()}),f.on("focus",function(){"undefined"===$.type(e)&&(e=f.val()),f.val("")}),f.on("blur",t),f.keypress(function(e){13===e.which&&(f.trigger("blur"),t())})},D=function(){var e="";"number"===$.type(B[0])&&(e=B[0]),"number"===$.type(B[1])&&(e+=" - "+B[1]),O(e)},O=function(t){"undefined"===$.type(t)&&(t=f.val());var n=t.length;t.length<5&&(n=5);for(var o="",i=0;n>i;i+=1)o+="9";n%2>.1&&(o[Math.floor(n/2+1)]="-");var r=$("<span></span>").addClass("ControlBar-pageInputTest");r.text(o).appendTo(e);var a=r.width()+2;r.remove(),p.css({width:a}),f.val(t)},q=function(e){return e+"px"};try{I()}catch(W){alert(W.name+": "+W.message)}})}()}